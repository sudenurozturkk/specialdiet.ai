{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\specialdiet.ai\\\\diyet-dostu-web\\\\client\\\\src\\\\components\\\\Chat.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport ChatBubble from './ChatBubble';\nimport UserInfoForm from './UserInfoForm';\nimport DietPlanGenerator from './DietPlanGenerator';\nconst Chat = () => {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [imageFile, setImageFile] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [chatList, setChatList] = useState([]);\n  const [activeChatId, setActiveChatId] = useState(null);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [showUserInfoForm, setShowUserInfoForm] = useState(false);\n  const [showDietPlan, setShowDietPlan] = useState(false);\n  const [userInfo, setUserInfo] = useState(null);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n  const [apiKey, setApiKey] = useState('');\n  const [keySubmitted, setKeySubmitted] = useState(true);\n  useEffect(() => {\n    fetchChatList();\n    checkUserInfo();\n\n    // .env veya server API'den API anahtarını al\n    fetchApiKey();\n  }, []);\n  useEffect(() => {\n    if (activeChatId) {\n      fetchChatHistory();\n    }\n  }, [activeChatId]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, showUserInfoForm, showDietPlan]);\n  const checkUserInfo = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        return;\n      }\n      const response = await axios.get('/api/user-info', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.userInfo) {\n        setUserInfo(response.data.userInfo);\n      } else {\n        // Kullanıcı bilgisi yoksa formu göster\n        // Gerçek uygulamada sohbet başlattıktan sonra göster\n        // Şimdilik yorum satırı olarak bırakıyoruz\n        // setShowUserInfoForm(true);\n      }\n    } catch (error) {\n      console.error('Kullanıcı bilgisi kontrolü sırasında hata:', error);\n    }\n  };\n  const fetchChatList = async () => {\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        setIsLoading(false);\n        return;\n      }\n      const response = await axios.get('/api/chat-list', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // Sohbet listesini ayarla\n      setChatList(response.data);\n\n      // İlk sohbeti aktif olarak işaretle (eğer liste boş değilse)\n      if (response.data.length > 0 && !activeChatId) {\n        setActiveChatId(response.data[0].id);\n        fetchChatHistory(response.data[0].id);\n      } else if (response.data.length === 0) {\n        // Sohbet listesi boşsa yeni bir sohbet oluştur\n        createNewChat();\n      }\n    } catch (error) {\n      console.error('Sohbet listesi alınırken hata:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const fetchChatHistory = async chatId => {\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        setIsLoading(false);\n        return;\n      }\n      const response = await axios.get(`/api/chat-history/${chatId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // Başarılı yanıtta mesajları güncelle\n      if (response.data.chatHistory && Array.isArray(response.data.chatHistory)) {\n        setMessages(response.data.chatHistory);\n      } else {\n        // Boş mesaj listesi\n        setMessages([]);\n      }\n    } catch (error) {\n      console.error('Sohbet geçmişi alınırken hata:', error);\n      setMessages([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const createNewChat = () => {\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        setIsLoading(false);\n        return;\n      }\n\n      // Yeni sohbet oluştur\n      axios.post('/api/create-chat', {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        if (response.data && response.data.id) {\n          // Yeni sohbeti listeye ekle\n          const newChat = {\n            id: response.data.id,\n            title: response.data.title || 'Yeni Sohbet',\n            lastMessage: new Date().toISOString()\n          };\n          setChatList(prevList => [...prevList, newChat]);\n          setActiveChatId(response.data.id);\n\n          // Yeni sohbetin geçmişini yükle (boş olacak)\n          setMessages([{\n            role: 'assistant',\n            content: `Merhaba! 😊 Diyet Dostu'na hoş geldin!\n\nBen senin kişisel beslenme ve spor asistanınım. Bana istediğin konuda soru sorabilirsin.\n\nTürk mutfağına uygun, kolay ve sağlıklı tarifler sunarak diyet hedeflerine ulaşmana yardımcı olacağım.\n\nİşte sana yardımcı olabileceğim konular:\n🥗 Türk mutfağına uygun düşük kalorili/yüksek proteinli tarifler\n🏋️‍♀️ Kişiselleştirilmiş egzersiz planları\n📸 Yemek fotoğraflarını analiz ederek besin değeri tahmini\n📝 Haftalık beslenme programı oluşturma\n📊 Kilo takibi ve gelişim analizi\n\nSormak istediğin bir şey var mı? Birlikte sağlıklı bir yaşam yolculuğuna başlayalım! 💪`\n          }]);\n        }\n      }).catch(error => {\n        console.error('Yeni sohbet oluşturulurken hata:', error);\n      }).finally(() => {\n        setIsLoading(false);\n      });\n    } catch (error) {\n      console.error('Yeni sohbet oluşturulurken hata:', error);\n      setIsLoading(false);\n    }\n  };\n  const deleteChat = async chatId => {\n    if (!window.confirm('Bu sohbeti silmek istediğinizden emin misiniz?')) {\n      return;\n    }\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        setIsLoading(false);\n        return;\n      }\n\n      // API'ya istek gönder\n      const response = await axios.delete(`/api/delete-chat/${chatId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // Başarılı yanıtta UI'ı güncelle\n      if (response.data.success) {\n        // Sohbet listesinden sil\n        setChatList(prevList => prevList.filter(chat => chat.id !== chatId));\n\n        // Eğer aktif sohbet siliniyorsa başka bir sohbete geç\n        if (chatId === activeChatId) {\n          const remainingChats = chatList.filter(chat => chat.id !== chatId);\n          const nextChat = remainingChats.length > 0 ? remainingChats[0] : null;\n          if (nextChat) {\n            setActiveChatId(nextChat.id);\n            // Bu sohbetin geçmişini yükle\n            fetchChatHistory(nextChat.id);\n          } else {\n            // Hiç sohbet kalmadıysa yeni bir sohbet oluştur\n            createNewChat();\n          }\n        }\n\n        // Bildirim göster\n        alert('Sohbet başarıyla silindi.');\n      } else {\n        alert('Sohbet silinirken bir hata oluştu.');\n      }\n    } catch (error) {\n      console.error('Sohbet silinirken hata:', error);\n      alert('Sohbet silinirken bir hata oluştu. Lütfen tekrar deneyin.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const clearChatHistory = async () => {\n    try {\n      if (!window.confirm('Sohbet geçmişini temizlemek istediğinizden emin misiniz?')) {\n        return;\n      }\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        setIsLoading(false);\n        return;\n      }\n\n      // API'ya istek gönder\n      const response = await axios.post('/api/clear-chat', {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.success) {\n        // Başarılı yanıtta mesajları güncelle\n        setMessages(response.data.chatHistory || [{\n          role: 'assistant',\n          content: `Merhaba! 😊 Diyet Dostu'na hoş geldin!\n\nBen senin kişisel beslenme ve spor asistanınım. Sohbet geçmişin temizlendi ve yeni bir konuşma başlatıldı.\n\nTürk mutfağına uygun, kolay ve sağlıklı tarifler sunarak diyet hedeflerine ulaşmana yardımcı olacağım.\n\nİşte sana yardımcı olabileceğim konular:\n🥗 Türk mutfağına uygun düşük kalorili/yüksek proteinli tarifler\n🏋️‍♀️ Kişiselleştirilmiş egzersiz planları\n📸 Yemek fotoğraflarını analiz ederek besin değeri tahmini\n📝 Haftalık beslenme programı oluşturma\n📊 Kilo takibi ve gelişim analizi\n\nSormak istediğin bir şey var mı? Birlikte sağlıklı bir yaşam yolculuğuna başlayalım! 💪`\n        }]);\n\n        // Aktif sohbeti güncelle\n        const updatedList = chatList.map(chat => {\n          if (chat.id === activeChatId) {\n            return {\n              ...chat,\n              title: 'Temizlenmiş Sohbet'\n            };\n          }\n          return chat;\n        });\n        setChatList(updatedList);\n\n        // Formları gizle\n        setShowUserInfoForm(false);\n        setShowDietPlan(false);\n\n        // Başarı mesajı göster\n        alert('Sohbet geçmişi başarıyla temizlendi.');\n      } else {\n        // Hata mesajı\n        alert('Sohbet geçmişi temizlenirken bir hata oluştu.');\n      }\n    } catch (error) {\n      console.error('Sohbet geçmişi temizlenirken hata:', error);\n      // Hata durumunda kullanıcıyı bilgilendir\n      alert('Sohbet geçmişi temizlenirken bir hata oluştu. Lütfen tekrar deneyin.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const scrollToBottom = () => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n  const handleImageUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setImageFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const clearImage = () => {\n    setImageFile(null);\n    setImagePreview(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const message = input.trim();\n    if (!message && !imageFile) return;\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        setMessages(prev => [...prev, {\n          role: 'assistant',\n          content: 'Oturum süreniz dolmuş görünüyor. Lütfen tekrar giriş yapın.'\n        }]);\n        setIsLoading(false);\n        return;\n      }\n\n      // Kullanıcı mesajını ekle\n      const userMessage = {\n        role: 'user',\n        content: message\n      };\n      setMessages(prev => [...prev, userMessage]);\n      setInput('');\n\n      // Özel komutları kontrol et\n      if (message.toLowerCase().includes('kişisel bilgilerimi girmek istiyorum') || message.toLowerCase().includes('diyet programı oluşturmak istiyorum') || message.toLowerCase().includes('bilgilerimi güncellemek istiyorum')) {\n        setTimeout(() => {\n          setShowUserInfoForm(true);\n          setIsLoading(false);\n        }, 500);\n        return;\n      }\n      if (message.toLowerCase().includes('diyet planımı göster') || message.toLowerCase().includes('beslenme planımı göster') || message.toLowerCase().includes('beslenme planı oluştur')) {\n        if (!userInfo) {\n          // Kullanıcı bilgisi yoksa bilgi formunu göster\n          setTimeout(() => {\n            setMessages(prev => [...prev, {\n              role: 'assistant',\n              content: 'Diyet planı oluşturmak için öncelikle kişisel bilgilerinizi girmeniz gerekiyor. Bilgi formunu açıyorum...'\n            }]);\n            setTimeout(() => {\n              setShowUserInfoForm(true);\n              setIsLoading(false);\n            }, 500);\n          }, 500);\n        } else {\n          // Kullanıcı bilgisi varsa diyet planını göster\n          setTimeout(() => {\n            setMessages(prev => [...prev, {\n              role: 'assistant',\n              content: 'İşte size özel hazırladığım beslenme planı:'\n            }]);\n            setTimeout(() => {\n              setShowDietPlan(true);\n              setIsLoading(false);\n            }, 500);\n          }, 500);\n        }\n        return;\n      }\n\n      // Eğer görsel varsa, farklı bir endpoint kullanarak görsel analizi yapın\n      if (imageFile) {\n        const formData = new FormData();\n        formData.append('image', imageFile);\n        try {\n          console.log('Görsel analizi isteği gönderiliyor...');\n          const response = await axios.post('/api/analyze-image', formData, {\n            headers: {\n              Authorization: `Bearer ${token}`,\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n          console.log('Görsel analiz yanıtı:', response.data);\n\n          // Analiz sonucunu göster (eğer socket.io ile otomatik gelmiyorsa)\n          if (!response.data.message || response.data.message !== 'Görüntü analiz edildi') {\n            // Mesaj yanıtı sadece bildirim içeriyorsa, birkaç saniye sonra sohbet geçmişini güncelle\n            setTimeout(() => {\n              fetchChatHistory(activeChatId);\n            }, 1000);\n          }\n\n          // Görsel önizlemeyi temizle\n          clearImage();\n        } catch (imgError) {\n          console.error('Görsel analiz hatası:', imgError);\n\n          // Hata mesajını sohbete ekle\n          setMessages(prev => [...prev, {\n            role: 'assistant',\n            content: 'Görsel analiz edilirken bir hata oluştu. Lütfen daha sonra tekrar deneyin veya başka bir görsel yükleyin.'\n          }]);\n        }\n      } else {\n        // Görsel yoksa normal mesaj gönderimi yap\n        try {\n          console.log('Mesaj gönderiliyor:', message);\n          console.log('Aktif sohbet ID:', activeChatId);\n          const response = await axios.post('/api/chat', {\n            message,\n            chatId: activeChatId\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          console.log('API yanıtı:', response.data);\n\n          // Asistan yanıtını ekle (cevap varsa)\n          if (response.data.response) {\n            const assistantMessage = {\n              role: 'assistant',\n              content: response.data.response\n            };\n            setMessages(prev => [...prev, assistantMessage]);\n          } else {\n            // Yanıt yoksa, sohbet geçmişini güncellemek için bekle\n            setTimeout(() => {\n              fetchChatHistory(activeChatId);\n            }, 1000);\n          }\n        } catch (chatError) {\n          console.error('Mesaj gönderme hatası:', chatError);\n\n          // Hata mesajını sohbete ekle ve daha açıklayıcı hata mesajları sağla\n          let errorMessage = 'Üzgünüm, mesajınız gönderilemedi. Lütfen internet bağlantınızı kontrol edin veya daha sonra tekrar deneyin.';\n          if (chatError.response) {\n            // Sunucu yanıtı var, hata kodu ile birlikte\n            console.error('Sunucu yanıt kodu:', chatError.response.status);\n            console.error('Sunucu hata mesajı:', chatError.response.data);\n            if (chatError.response.status === 401 || chatError.response.status === 403) {\n              errorMessage = 'Oturum süreniz dolmuş görünüyor. Lütfen tekrar giriş yapın.';\n            } else if (chatError.response.status === 404) {\n              errorMessage = 'API endpoint bulunamadı. Sunucu yapılandırması kontrol edilmeli.';\n            } else if (chatError.response.status === 500) {\n              errorMessage = 'Sunucu hatası. Lütfen daha sonra tekrar deneyin.';\n            }\n          } else if (chatError.request) {\n            // İstek yapıldı ama yanıt alınamadı\n            console.error('Yanıt alınamadı:', chatError.request);\n            errorMessage = 'Sunucuya bağlanılamıyor. Lütfen sunucunun çalıştığından emin olun.';\n          }\n          setMessages(prev => [...prev, {\n            role: 'assistant',\n            content: errorMessage\n          }]);\n        }\n      }\n    } catch (error) {\n      console.error('Mesaj gönderilirken genel hata:', error);\n\n      // Hata mesajını sohbete ekleyin\n      const errorMessage = {\n        role: 'assistant',\n        content: 'Üzgünüm, bir hata oluştu. Lütfen daha sonra tekrar deneyin.'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n      setTimeout(scrollToBottom, 100);\n    }\n  };\n  const handleUserInfoSubmit = formData => {\n    // Kullanıcı bilgilerini kaydet\n    setUserInfo(formData);\n    setShowUserInfoForm(false);\n\n    // Kullanıcı bilgileri alındığında diyet planını göster\n    setTimeout(() => {\n      setMessages(prev => [...prev, {\n        role: 'assistant',\n        content: `Teşekkürler! Bilgileriniz kaydedildi. \n\nSize özel bir beslenme planı hazırlıyorum. Bu plan, hedeflerinize, tercihlerinize ve ihtiyaçlarınıza göre özelleştirilmiştir.\n\nİşte size özel beslenme planım:`\n      }]);\n      setTimeout(() => {\n        setShowDietPlan(true);\n      }, 1000);\n    }, 500);\n  };\n  const toggleSidebar = () => {\n    setSidebarOpen(!sidebarOpen);\n  };\n\n  // Eksik olduğu için not silme fonksiyonunu ekliyorum\n  const deleteNote = async noteId => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        return;\n      }\n      const response = await axios.delete(`/api/delete-note/${noteId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.success) {\n        // Notu listeden kaldır\n        setMessages(messages.filter(msg => {\n          // Not ID'si mesaj içinde tanımlanmışsa (data-note-id gibi bir özellik ile)\n          return !(msg.type === 'note' && msg.noteId === noteId);\n        }));\n\n        // Bildirim göster\n        alert('Not başarıyla silindi');\n      } else {\n        alert('Not silinirken bir hata oluştu');\n      }\n    } catch (error) {\n      console.error('Not silinirken hata:', error);\n      alert('Not silinirken bir hata oluştu. Lütfen tekrar deneyin.');\n    }\n  };\n  const handleSubmitApiKey = e => {\n    e.preventDefault();\n    if (apiKey) {\n      localStorage.setItem('geminiApiKey', apiKey);\n      setKeySubmitted(true);\n\n      // API anahtarını sunucuya gönder\n      const token = localStorage.getItem('token');\n      if (token) {\n        axios.post('/api/save-api-key', {\n          apiKey\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).catch(error => {\n          console.error('API anahtarı kaydedilirken hata:', error);\n        });\n      }\n    }\n  };\n\n  // API anahtarını sunucudan veya .env dosyasından al\n  const fetchApiKey = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadı');\n        return;\n      }\n\n      // Sunucudan API anahtarını alma isteği\n      const response = await axios.get('/api/get-api-key', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data && response.data.apiKey) {\n        setApiKey(response.data.apiKey);\n        setKeySubmitted(true);\n      } else {\n        // Eğer localStorage'da kayıtlı bir anahtar varsa onu kullan\n        const savedKey = localStorage.getItem('geminiApiKey');\n        if (savedKey) {\n          setApiKey(savedKey);\n          setKeySubmitted(true);\n        } else {\n          // Eğer API anahtarı yoksa ve kullanıcı girmediyse, modal göster\n          setKeySubmitted(false);\n        }\n      }\n    } catch (error) {\n      console.error('API anahtarı alınırken hata:', error);\n\n      // Eğer localStorage'da kayıtlı bir anahtar varsa onu kullan\n      const savedKey = localStorage.getItem('geminiApiKey');\n      if (savedKey) {\n        setApiKey(savedKey);\n        setKeySubmitted(true);\n      } else {\n        // Eğer API anahtarı yoksa ve kullanıcı girmediyse, modal göster\n        setKeySubmitted(false);\n      }\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-page-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `sidebar ${sidebarOpen ? 'open' : 'closed'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 11\n    }\n  }, \"Sohbetlerim\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: createNewChat,\n    className: \"new-chat-button\",\n    title: \"Yeni sohbet ba\\u015Flat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-5 w-5\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M12 4v16m8-8H4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 669,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 9\n    }\n  }, chatList.map(chat => /*#__PURE__*/React.createElement(\"div\", {\n    key: chat.id,\n    className: `chat-item ${chat.id === activeChatId ? 'active' : ''}`,\n    onClick: () => setActiveChatId(chat.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-item-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 681,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"chat-item-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 17\n    }\n  }, chat.title || 'Yeni Sohbet'), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"chat-item-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 17\n    }\n  }, chat.date || new Date().toLocaleDateString('tr-TR'))), chat.id !== 'current' && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => {\n      e.stopPropagation();\n      deleteChat(chat.id);\n    },\n    className: \"delete-chat-button\",\n    title: \"Sohbeti sil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-5 w-5\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\",\n    clipRule: \"evenodd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 695,\n      columnNumber: 21\n    }\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-chat-area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"toggle-sidebar-button\",\n    onClick: toggleSidebar,\n    title: sidebarOpen ? \"Kenar çubuğunu kapat\" : \"Kenar çubuğunu aç\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 707,\n      columnNumber: 9\n    }\n  }, sidebarOpen ? /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-6 w-6\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 713,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M11 19l-7-7 7-7m8 14l-7-7 7-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 714,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-6 w-6\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M13 5l7 7-7 7M5 5l7 7-7 7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 718,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 723,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-header-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 724,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"assistant-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 725,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"assistant-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 15\n    }\n  }, \"\\uD83E\\uDD57\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"assistant-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 727,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 728,\n      columnNumber: 17\n    }\n  }, \"Diyet Dostu\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 729,\n      columnNumber: 17\n    }\n  }, \"Sa\\u011Fl\\u0131kl\\u0131 ya\\u015Fam asistan\\u0131n\\u0131z\"))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: clearChatHistory,\n    className: \"clear-button\",\n    title: \"Sohbet ge\\xE7mi\\u015Fini temizle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 732,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-5 w-5 mr-1\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 737,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\",\n    clipRule: \"evenodd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 17\n    }\n  })), \"Sohbeti Temizle\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messages-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 9\n    }\n  }, messages.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"welcome-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 747,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"welcome-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 748,\n      columnNumber: 15\n    }\n  }, \"\\uD83D\\uDC4B\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 15\n    }\n  }, \"Diyet Dostu'na Ho\\u015F Geldin!\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 750,\n      columnNumber: 15\n    }\n  }, \"Beslenme, diyet veya fitness hakk\\u0131nda bir \\u015Feyler sor.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"example-questions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 751,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setInput(\"Kilo vermek için nasıl beslenmeliyim?\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 752,\n      columnNumber: 17\n    }\n  }, \"Kilo vermek i\\xE7in nas\\u0131l beslenmeliyim?\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setInput(\"Bugün ne kadar protein almalıyım?\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 755,\n      columnNumber: 17\n    }\n  }, \"Bug\\xFCn ne kadar protein almal\\u0131y\\u0131m?\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setInput(\"Akşam yemeği için sağlıklı bir tarif önerir misin?\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 758,\n      columnNumber: 17\n    }\n  }, \"Ak\\u015Fam yeme\\u011Fi i\\xE7in sa\\u011Fl\\u0131kl\\u0131 bir tarif \\xF6nerir misin?\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messages-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 764,\n      columnNumber: 13\n    }\n  }, messages.map((msg, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: `message-container ${msg.role}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 766,\n      columnNumber: 17\n    }\n  }, msg.role === 'assistant' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"avatar-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"assistant-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 23\n    }\n  }, \"\\uD83E\\uDD57\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: `message ${msg.role === 'user' ? 'user-message' : 'assistant-message'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 19\n    }\n  }, msg.content)))), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 781,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 782,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"assistant-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 783,\n      columnNumber: 17\n    }\n  }, \"\\uD83E\\uDD57\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading-animation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 785,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading-dot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 786,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading-dot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 787,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading-dot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 788,\n      columnNumber: 17\n    }\n  }))), showUserInfoForm && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-info-form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UserInfoForm, {\n    onSubmit: handleUserInfoSubmit,\n    onCancel: () => setShowUserInfoForm(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 15\n    }\n  })), showDietPlan && userInfo && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"diet-plan-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 805,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DietPlanGenerator, {\n    userInfo: userInfo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 806,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    ref: messagesEndRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 810,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 813,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"input-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 814,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"textarea-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 815,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    value: input,\n    onChange: e => setInput(e.target.value),\n    onKeyDown: handleKeyDown,\n    ref: textareaRef,\n    placeholder: \"Diyet Dostu'na bir soru sor...\",\n    rows: \"1\",\n    className: \"chat-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 816,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image-upload\",\n    className: \"upload-image-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 826,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-6 w-6\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 827,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 828,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"image-upload\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleImageUpload,\n    className: \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 830,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: isLoading || !input.trim() && !imageFile,\n    className: \"send-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 840,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-6 w-6\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 845,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M13 5l7 7-7 7M5 5l7 7-7 7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 846,\n      columnNumber: 17\n    }\n  })))), imagePreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image-preview-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 852,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: imagePreview,\n    alt: \"Y\\xFCklenen g\\xF6rsel\",\n    className: \"image-preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 853,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: clearImage,\n    className: \"remove-image-button\",\n    title: \"G\\xF6rseli kald\\u0131r\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 854,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-4 w-4\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 859,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M6 18L18 6M6 6l12 12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 860,\n      columnNumber: 19\n    }\n  })))))), !keySubmitted ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"api-key-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 870,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"api-key-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 871,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 872,\n      columnNumber: 13\n    }\n  }, \"Gemini API Anahtar\\u0131 Gerekli\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 873,\n      columnNumber: 13\n    }\n  }, \"Diyet Dostu AI ile sohbet etmek i\\xE7in Gemini API anahtar\\u0131n\\u0131z\\u0131 girmeniz gerekiyor.\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmitApiKey,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 874,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: apiKey,\n    onChange: e => setApiKey(e.target.value),\n    className: \"api-key-input\",\n    placeholder: \"Gemini API anahtar\\u0131n\\u0131z\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 875,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"api-key-actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 883,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"remember-checkbox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 884,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    defaultChecked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 885,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 886,\n      columnNumber: 19\n    }\n  }, \"Bu bilgisayarda hat\\u0131rla\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"api-key-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 888,\n      columnNumber: 17\n    }\n  }, \"Devam Et\"))))) : null);\n};\nexport default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","ChatBubble","UserInfoForm","DietPlanGenerator","Chat","messages","setMessages","input","setInput","isLoading","setIsLoading","imageFile","setImageFile","imagePreview","setImagePreview","chatList","setChatList","activeChatId","setActiveChatId","sidebarOpen","setSidebarOpen","showUserInfoForm","setShowUserInfoForm","showDietPlan","setShowDietPlan","userInfo","setUserInfo","messagesEndRef","textareaRef","apiKey","setApiKey","keySubmitted","setKeySubmitted","fetchChatList","checkUserInfo","fetchApiKey","fetchChatHistory","scrollToBottom","token","localStorage","getItem","console","error","response","get","headers","Authorization","data","length","id","createNewChat","chatId","chatHistory","Array","isArray","post","then","newChat","title","lastMessage","Date","toISOString","prevList","role","content","catch","finally","deleteChat","window","confirm","delete","success","filter","chat","remainingChats","nextChat","alert","clearChatHistory","updatedList","map","current","scrollIntoView","behavior","handleKeyDown","e","key","shiftKey","preventDefault","handleSubmit","handleImageUpload","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","clearImage","message","trim","prev","userMessage","toLowerCase","includes","setTimeout","formData","FormData","append","log","imgError","assistantMessage","chatError","errorMessage","status","request","handleUserInfoSubmit","toggleSidebar","deleteNote","noteId","msg","type","handleSubmitApiKey","setItem","savedKey","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","date","toLocaleDateString","stopPropagation","fillRule","clipRule","index","onSubmit","onCancel","ref","value","onChange","onKeyDown","placeholder","rows","htmlFor","accept","disabled","src","alt","required","defaultChecked"],"sources":["C:/Users/Administrator/Desktop/specialdiet.ai/diyet-dostu-web/client/src/components/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport ChatBubble from './ChatBubble';\r\nimport UserInfoForm from './UserInfoForm';\r\nimport DietPlanGenerator from './DietPlanGenerator';\r\n\r\nconst Chat = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [chatList, setChatList] = useState([]);\r\n  const [activeChatId, setActiveChatId] = useState(null);\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [showUserInfoForm, setShowUserInfoForm] = useState(false);\r\n  const [showDietPlan, setShowDietPlan] = useState(false);\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n  const textareaRef = useRef(null);\r\n  const [apiKey, setApiKey] = useState('');\r\n  const [keySubmitted, setKeySubmitted] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchChatList();\r\n    checkUserInfo();\r\n    \r\n    // .env veya server API'den API anahtarını al\r\n    fetchApiKey();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (activeChatId) {\r\n      fetchChatHistory();\r\n    }\r\n  }, [activeChatId]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages, showUserInfoForm, showDietPlan]);\r\n\r\n  const checkUserInfo = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.get('/api/user-info', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      if (response.data.userInfo) {\r\n        setUserInfo(response.data.userInfo);\r\n      } else {\r\n        // Kullanıcı bilgisi yoksa formu göster\r\n        // Gerçek uygulamada sohbet başlattıktan sonra göster\r\n        // Şimdilik yorum satırı olarak bırakıyoruz\r\n        // setShowUserInfoForm(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Kullanıcı bilgisi kontrolü sırasında hata:', error);\r\n    }\r\n  };\r\n\r\n  const fetchChatList = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.get('/api/chat-list', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      // Sohbet listesini ayarla\r\n      setChatList(response.data);\r\n      \r\n      // İlk sohbeti aktif olarak işaretle (eğer liste boş değilse)\r\n      if (response.data.length > 0 && !activeChatId) {\r\n        setActiveChatId(response.data[0].id);\r\n        fetchChatHistory(response.data[0].id);\r\n      } else if (response.data.length === 0) {\r\n        // Sohbet listesi boşsa yeni bir sohbet oluştur\r\n        createNewChat();\r\n      }\r\n    } catch (error) {\r\n      console.error('Sohbet listesi alınırken hata:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchChatHistory = async (chatId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.get(`/api/chat-history/${chatId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      // Başarılı yanıtta mesajları güncelle\r\n      if (response.data.chatHistory && Array.isArray(response.data.chatHistory)) {\r\n        setMessages(response.data.chatHistory);\r\n      } else {\r\n        // Boş mesaj listesi\r\n        setMessages([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Sohbet geçmişi alınırken hata:', error);\r\n      setMessages([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const createNewChat = () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // Yeni sohbet oluştur\r\n      axios.post('/api/create-chat', {}, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(response => {\r\n        if (response.data && response.data.id) {\r\n          // Yeni sohbeti listeye ekle\r\n          const newChat = {\r\n            id: response.data.id,\r\n            title: response.data.title || 'Yeni Sohbet',\r\n            lastMessage: new Date().toISOString()\r\n          };\r\n          \r\n          setChatList(prevList => [...prevList, newChat]);\r\n          setActiveChatId(response.data.id);\r\n          \r\n          // Yeni sohbetin geçmişini yükle (boş olacak)\r\n          setMessages([{\r\n            role: 'assistant',\r\n            content: `Merhaba! 😊 Diyet Dostu'na hoş geldin!\r\n\r\nBen senin kişisel beslenme ve spor asistanınım. Bana istediğin konuda soru sorabilirsin.\r\n\r\nTürk mutfağına uygun, kolay ve sağlıklı tarifler sunarak diyet hedeflerine ulaşmana yardımcı olacağım.\r\n\r\nİşte sana yardımcı olabileceğim konular:\r\n🥗 Türk mutfağına uygun düşük kalorili/yüksek proteinli tarifler\r\n🏋️‍♀️ Kişiselleştirilmiş egzersiz planları\r\n📸 Yemek fotoğraflarını analiz ederek besin değeri tahmini\r\n📝 Haftalık beslenme programı oluşturma\r\n📊 Kilo takibi ve gelişim analizi\r\n\r\nSormak istediğin bir şey var mı? Birlikte sağlıklı bir yaşam yolculuğuna başlayalım! 💪`\r\n          }]);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Yeni sohbet oluşturulurken hata:', error);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n    } catch (error) {\r\n      console.error('Yeni sohbet oluşturulurken hata:', error);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteChat = async (chatId) => {\r\n    if (!window.confirm('Bu sohbeti silmek istediğinizden emin misiniz?')) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // API'ya istek gönder\r\n      const response = await axios.delete(`/api/delete-chat/${chatId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      // Başarılı yanıtta UI'ı güncelle\r\n      if (response.data.success) {\r\n        // Sohbet listesinden sil\r\n        setChatList(prevList => prevList.filter(chat => chat.id !== chatId));\r\n        \r\n        // Eğer aktif sohbet siliniyorsa başka bir sohbete geç\r\n        if (chatId === activeChatId) {\r\n          const remainingChats = chatList.filter(chat => chat.id !== chatId);\r\n          const nextChat = remainingChats.length > 0 ? remainingChats[0] : null;\r\n          \r\n          if (nextChat) {\r\n            setActiveChatId(nextChat.id);\r\n            // Bu sohbetin geçmişini yükle\r\n            fetchChatHistory(nextChat.id);\r\n          } else {\r\n            // Hiç sohbet kalmadıysa yeni bir sohbet oluştur\r\n            createNewChat();\r\n          }\r\n        }\r\n        \r\n        // Bildirim göster\r\n        alert('Sohbet başarıyla silindi.');\r\n      } else {\r\n        alert('Sohbet silinirken bir hata oluştu.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Sohbet silinirken hata:', error);\r\n      alert('Sohbet silinirken bir hata oluştu. Lütfen tekrar deneyin.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const clearChatHistory = async () => {\r\n    try {\r\n      if (!window.confirm('Sohbet geçmişini temizlemek istediğinizden emin misiniz?')) {\r\n        return;\r\n      }\r\n      \r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // API'ya istek gönder\r\n      const response = await axios.post('/api/clear-chat', {}, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        // Başarılı yanıtta mesajları güncelle\r\n        setMessages(response.data.chatHistory || [{\r\n          role: 'assistant',\r\n          content: `Merhaba! 😊 Diyet Dostu'na hoş geldin!\r\n\r\nBen senin kişisel beslenme ve spor asistanınım. Sohbet geçmişin temizlendi ve yeni bir konuşma başlatıldı.\r\n\r\nTürk mutfağına uygun, kolay ve sağlıklı tarifler sunarak diyet hedeflerine ulaşmana yardımcı olacağım.\r\n\r\nİşte sana yardımcı olabileceğim konular:\r\n🥗 Türk mutfağına uygun düşük kalorili/yüksek proteinli tarifler\r\n🏋️‍♀️ Kişiselleştirilmiş egzersiz planları\r\n📸 Yemek fotoğraflarını analiz ederek besin değeri tahmini\r\n📝 Haftalık beslenme programı oluşturma\r\n📊 Kilo takibi ve gelişim analizi\r\n\r\nSormak istediğin bir şey var mı? Birlikte sağlıklı bir yaşam yolculuğuna başlayalım! 💪`\r\n        }]);\r\n        \r\n        // Aktif sohbeti güncelle\r\n        const updatedList = chatList.map(chat => {\r\n          if (chat.id === activeChatId) {\r\n            return { ...chat, title: 'Temizlenmiş Sohbet' };\r\n          }\r\n          return chat;\r\n        });\r\n        \r\n        setChatList(updatedList);\r\n        \r\n        // Formları gizle\r\n        setShowUserInfoForm(false);\r\n        setShowDietPlan(false);\r\n        \r\n        // Başarı mesajı göster\r\n        alert('Sohbet geçmişi başarıyla temizlendi.');\r\n      } else {\r\n        // Hata mesajı\r\n        alert('Sohbet geçmişi temizlenirken bir hata oluştu.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Sohbet geçmişi temizlenirken hata:', error);\r\n      // Hata durumunda kullanıcıyı bilgilendir\r\n      alert('Sohbet geçmişi temizlenirken bir hata oluştu. Lütfen tekrar deneyin.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImageFile(file);\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setImagePreview(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const clearImage = () => {\r\n    setImageFile(null);\r\n    setImagePreview(null);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const message = input.trim();\r\n    \r\n    if (!message && !imageFile) return;\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        setMessages((prev) => [...prev, {\r\n          role: 'assistant',\r\n          content: 'Oturum süreniz dolmuş görünüyor. Lütfen tekrar giriş yapın.'\r\n        }]);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // Kullanıcı mesajını ekle\r\n      const userMessage = {\r\n        role: 'user',\r\n        content: message\r\n      };\r\n      \r\n      setMessages((prev) => [...prev, userMessage]);\r\n      setInput('');\r\n      \r\n      // Özel komutları kontrol et\r\n      if (message.toLowerCase().includes('kişisel bilgilerimi girmek istiyorum') ||\r\n          message.toLowerCase().includes('diyet programı oluşturmak istiyorum') ||\r\n          message.toLowerCase().includes('bilgilerimi güncellemek istiyorum')) {\r\n        \r\n        setTimeout(() => {\r\n          setShowUserInfoForm(true);\r\n          setIsLoading(false);\r\n        }, 500);\r\n        \r\n        return;\r\n      }\r\n      \r\n      if (message.toLowerCase().includes('diyet planımı göster') ||\r\n          message.toLowerCase().includes('beslenme planımı göster') ||\r\n          message.toLowerCase().includes('beslenme planı oluştur')) {\r\n        \r\n        if (!userInfo) {\r\n          // Kullanıcı bilgisi yoksa bilgi formunu göster\r\n          setTimeout(() => {\r\n            setMessages((prev) => [...prev, {\r\n              role: 'assistant',\r\n              content: 'Diyet planı oluşturmak için öncelikle kişisel bilgilerinizi girmeniz gerekiyor. Bilgi formunu açıyorum...'\r\n            }]);\r\n            \r\n            setTimeout(() => {\r\n              setShowUserInfoForm(true);\r\n              setIsLoading(false);\r\n            }, 500);\r\n          }, 500);\r\n        } else {\r\n          // Kullanıcı bilgisi varsa diyet planını göster\r\n          setTimeout(() => {\r\n            setMessages((prev) => [...prev, {\r\n              role: 'assistant',\r\n              content: 'İşte size özel hazırladığım beslenme planı:'\r\n            }]);\r\n            \r\n            setTimeout(() => {\r\n              setShowDietPlan(true);\r\n              setIsLoading(false);\r\n            }, 500);\r\n          }, 500);\r\n        }\r\n        \r\n        return;\r\n      }\r\n      \r\n      // Eğer görsel varsa, farklı bir endpoint kullanarak görsel analizi yapın\r\n      if (imageFile) {\r\n        const formData = new FormData();\r\n        formData.append('image', imageFile);\r\n        \r\n        try {\r\n          console.log('Görsel analizi isteği gönderiliyor...');\r\n          const response = await axios.post(\r\n            '/api/analyze-image',\r\n            formData,\r\n            {\r\n              headers: { \r\n                Authorization: `Bearer ${token}`,\r\n                'Content-Type': 'multipart/form-data' \r\n              }\r\n            }\r\n          );\r\n          \r\n          console.log('Görsel analiz yanıtı:', response.data);\r\n          \r\n          // Analiz sonucunu göster (eğer socket.io ile otomatik gelmiyorsa)\r\n          if (!response.data.message || response.data.message !== 'Görüntü analiz edildi') {\r\n            // Mesaj yanıtı sadece bildirim içeriyorsa, birkaç saniye sonra sohbet geçmişini güncelle\r\n            setTimeout(() => {\r\n              fetchChatHistory(activeChatId);\r\n            }, 1000);\r\n          }\r\n          \r\n          // Görsel önizlemeyi temizle\r\n          clearImage();\r\n        } catch (imgError) {\r\n          console.error('Görsel analiz hatası:', imgError);\r\n          \r\n          // Hata mesajını sohbete ekle\r\n          setMessages((prev) => [...prev, {\r\n            role: 'assistant',\r\n            content: 'Görsel analiz edilirken bir hata oluştu. Lütfen daha sonra tekrar deneyin veya başka bir görsel yükleyin.'\r\n          }]);\r\n        }\r\n      } else {\r\n        // Görsel yoksa normal mesaj gönderimi yap\r\n        try {\r\n          console.log('Mesaj gönderiliyor:', message);\r\n          console.log('Aktif sohbet ID:', activeChatId);\r\n          \r\n          const response = await axios.post(\r\n            '/api/chat',\r\n            {\r\n              message,\r\n              chatId: activeChatId\r\n            },\r\n            {\r\n              headers: { Authorization: `Bearer ${token}` }\r\n            }\r\n          );\r\n          \r\n          console.log('API yanıtı:', response.data);\r\n          \r\n          // Asistan yanıtını ekle (cevap varsa)\r\n          if (response.data.response) {\r\n            const assistantMessage = {\r\n              role: 'assistant',\r\n              content: response.data.response\r\n            };\r\n            \r\n            setMessages((prev) => [...prev, assistantMessage]);\r\n          } else {\r\n            // Yanıt yoksa, sohbet geçmişini güncellemek için bekle\r\n            setTimeout(() => {\r\n              fetchChatHistory(activeChatId);\r\n            }, 1000);\r\n          }\r\n        } catch (chatError) {\r\n          console.error('Mesaj gönderme hatası:', chatError);\r\n          \r\n          // Hata mesajını sohbete ekle ve daha açıklayıcı hata mesajları sağla\r\n          let errorMessage = 'Üzgünüm, mesajınız gönderilemedi. Lütfen internet bağlantınızı kontrol edin veya daha sonra tekrar deneyin.';\r\n          \r\n          if (chatError.response) {\r\n            // Sunucu yanıtı var, hata kodu ile birlikte\r\n            console.error('Sunucu yanıt kodu:', chatError.response.status);\r\n            console.error('Sunucu hata mesajı:', chatError.response.data);\r\n            \r\n            if (chatError.response.status === 401 || chatError.response.status === 403) {\r\n              errorMessage = 'Oturum süreniz dolmuş görünüyor. Lütfen tekrar giriş yapın.';\r\n            } else if (chatError.response.status === 404) {\r\n              errorMessage = 'API endpoint bulunamadı. Sunucu yapılandırması kontrol edilmeli.';\r\n            } else if (chatError.response.status === 500) {\r\n              errorMessage = 'Sunucu hatası. Lütfen daha sonra tekrar deneyin.';\r\n            }\r\n          } else if (chatError.request) {\r\n            // İstek yapıldı ama yanıt alınamadı\r\n            console.error('Yanıt alınamadı:', chatError.request);\r\n            errorMessage = 'Sunucuya bağlanılamıyor. Lütfen sunucunun çalıştığından emin olun.';\r\n          }\r\n          \r\n          setMessages((prev) => [...prev, {\r\n            role: 'assistant',\r\n            content: errorMessage\r\n          }]);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Mesaj gönderilirken genel hata:', error);\r\n      \r\n      // Hata mesajını sohbete ekleyin\r\n      const errorMessage = {\r\n        role: 'assistant',\r\n        content: 'Üzgünüm, bir hata oluştu. Lütfen daha sonra tekrar deneyin.'\r\n      };\r\n      \r\n      setMessages((prev) => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n      setTimeout(scrollToBottom, 100);\r\n    }\r\n  };\r\n\r\n  const handleUserInfoSubmit = (formData) => {\r\n    // Kullanıcı bilgilerini kaydet\r\n    setUserInfo(formData);\r\n    setShowUserInfoForm(false);\r\n    \r\n    // Kullanıcı bilgileri alındığında diyet planını göster\r\n    setTimeout(() => {\r\n      setMessages((prev) => [...prev, {\r\n        role: 'assistant',\r\n        content: `Teşekkürler! Bilgileriniz kaydedildi. \r\n\r\nSize özel bir beslenme planı hazırlıyorum. Bu plan, hedeflerinize, tercihlerinize ve ihtiyaçlarınıza göre özelleştirilmiştir.\r\n\r\nİşte size özel beslenme planım:`\r\n      }]);\r\n      \r\n      setTimeout(() => {\r\n        setShowDietPlan(true);\r\n      }, 1000);\r\n    }, 500);\r\n  };\r\n\r\n  const toggleSidebar = () => {\r\n    setSidebarOpen(!sidebarOpen);\r\n  };\r\n\r\n  // Eksik olduğu için not silme fonksiyonunu ekliyorum\r\n  const deleteNote = async (noteId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.delete(`/api/delete-note/${noteId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        // Notu listeden kaldır\r\n        setMessages(messages.filter(msg => {\r\n          // Not ID'si mesaj içinde tanımlanmışsa (data-note-id gibi bir özellik ile)\r\n          return !(msg.type === 'note' && msg.noteId === noteId);\r\n        }));\r\n        \r\n        // Bildirim göster\r\n        alert('Not başarıyla silindi');\r\n      } else {\r\n        alert('Not silinirken bir hata oluştu');\r\n      }\r\n    } catch (error) {\r\n      console.error('Not silinirken hata:', error);\r\n      alert('Not silinirken bir hata oluştu. Lütfen tekrar deneyin.');\r\n    }\r\n  };\r\n\r\n  const handleSubmitApiKey = (e) => {\r\n    e.preventDefault();\r\n    if (apiKey) {\r\n      localStorage.setItem('geminiApiKey', apiKey);\r\n      setKeySubmitted(true);\r\n      \r\n      // API anahtarını sunucuya gönder\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        axios.post('/api/save-api-key', { apiKey }, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        }).catch(error => {\r\n          console.error('API anahtarı kaydedilirken hata:', error);\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // API anahtarını sunucudan veya .env dosyasından al\r\n  const fetchApiKey = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadı');\r\n        return;\r\n      }\r\n      \r\n      // Sunucudan API anahtarını alma isteği\r\n      const response = await axios.get('/api/get-api-key', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      if (response.data && response.data.apiKey) {\r\n        setApiKey(response.data.apiKey);\r\n        setKeySubmitted(true);\r\n      } else {\r\n        // Eğer localStorage'da kayıtlı bir anahtar varsa onu kullan\r\n        const savedKey = localStorage.getItem('geminiApiKey');\r\n        if (savedKey) {\r\n          setApiKey(savedKey);\r\n          setKeySubmitted(true);\r\n        } else {\r\n          // Eğer API anahtarı yoksa ve kullanıcı girmediyse, modal göster\r\n          setKeySubmitted(false);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('API anahtarı alınırken hata:', error);\r\n      \r\n      // Eğer localStorage'da kayıtlı bir anahtar varsa onu kullan\r\n      const savedKey = localStorage.getItem('geminiApiKey');\r\n      if (savedKey) {\r\n        setApiKey(savedKey);\r\n        setKeySubmitted(true);\r\n      } else {\r\n        // Eğer API anahtarı yoksa ve kullanıcı girmediyse, modal göster\r\n        setKeySubmitted(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-page-container\">\r\n      {/* Sol Kenar Çubuğu - Sohbet Listesi */}\r\n      <div className={`sidebar ${sidebarOpen ? 'open' : 'closed'}`}>\r\n        <div className=\"sidebar-header\">\r\n          <h3>Sohbetlerim</h3>\r\n          <button \r\n            onClick={createNewChat}\r\n            className=\"new-chat-button\"\r\n            title=\"Yeni sohbet başlat\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"chat-list\">\r\n          {chatList.map((chat) => (\r\n            <div \r\n              key={chat.id}\r\n              className={`chat-item ${chat.id === activeChatId ? 'active' : ''}`}\r\n              onClick={() => setActiveChatId(chat.id)}\r\n            >\r\n              <div className=\"chat-item-content\">\r\n                <p className=\"chat-item-title\">{chat.title || 'Yeni Sohbet'}</p>\r\n                <p className=\"chat-item-date\">{chat.date || new Date().toLocaleDateString('tr-TR')}</p>\r\n              </div>\r\n              {chat.id !== 'current' && (\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    deleteChat(chat.id);\r\n                  }}\r\n                  className=\"delete-chat-button\"\r\n                  title=\"Sohbeti sil\"\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Ana Sohbet Alanı */}\r\n      <div className=\"main-chat-area\">\r\n        {/* Mobil görünümde kenar çubuğu açma/kapama butonu */}\r\n        <button \r\n          className=\"toggle-sidebar-button\"\r\n          onClick={toggleSidebar}\r\n          title={sidebarOpen ? \"Kenar çubuğunu kapat\" : \"Kenar çubuğunu aç\"}\r\n        >\r\n          {sidebarOpen ? (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 19l-7-7 7-7m8 14l-7-7 7-7\" />\r\n            </svg>\r\n          ) : (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\r\n            </svg>\r\n          )}\r\n        </button>\r\n        \r\n        <div className=\"chat-header\">\r\n          <div className=\"chat-header-content\">\r\n            <div className=\"assistant-profile\">\r\n              <div className=\"assistant-avatar\">🥗</div>\r\n              <div className=\"assistant-info\">\r\n                <h2>Diyet Dostu</h2>\r\n                <p>Sağlıklı yaşam asistanınız</p>\r\n              </div>\r\n            </div>\r\n            <button \r\n              onClick={clearChatHistory}\r\n              className=\"clear-button\"\r\n              title=\"Sohbet geçmişini temizle\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                <path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n              Sohbeti Temizle\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"messages-container\">\r\n          {messages.length === 0 ? (\r\n            <div className=\"welcome-message\">\r\n              <div className=\"welcome-icon\">👋</div>\r\n              <h2>Diyet Dostu'na Hoş Geldin!</h2>\r\n              <p>Beslenme, diyet veya fitness hakkında bir şeyler sor.</p>\r\n              <div className=\"example-questions\">\r\n                <button onClick={() => setInput(\"Kilo vermek için nasıl beslenmeliyim?\")}>\r\n                  Kilo vermek için nasıl beslenmeliyim?\r\n                </button>\r\n                <button onClick={() => setInput(\"Bugün ne kadar protein almalıyım?\")}>\r\n                  Bugün ne kadar protein almalıyım?\r\n                </button>\r\n                <button onClick={() => setInput(\"Akşam yemeği için sağlıklı bir tarif önerir misin?\")}>\r\n                  Akşam yemeği için sağlıklı bir tarif önerir misin?\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"messages-list\">\r\n              {messages.map((msg, index) => (\r\n                <div key={index} className={`message-container ${msg.role}`}>\r\n                  {msg.role === 'assistant' && (\r\n                    <div className=\"avatar-container\">\r\n                      <div className=\"assistant-avatar\">🥗</div>\r\n                    </div>\r\n                  )}\r\n                  <div className={`message ${msg.role === 'user' ? 'user-message' : 'assistant-message'}`}>\r\n                    {msg.content}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          \r\n          {isLoading && (\r\n            <div className=\"loading-message\">\r\n              <div className=\"loading-avatar\">\r\n                <div className=\"assistant-avatar\">🥗</div>\r\n              </div>\r\n              <div className=\"loading-animation\">\r\n                <div className=\"loading-dot\"></div>\r\n                <div className=\"loading-dot\"></div>\r\n                <div className=\"loading-dot\"></div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Kullanıcı bilgi formu */}\r\n          {showUserInfoForm && (\r\n            <div className=\"user-info-form-container\">\r\n              <UserInfoForm \r\n                onSubmit={handleUserInfoSubmit} \r\n                onCancel={() => setShowUserInfoForm(false)}\r\n              />\r\n            </div>\r\n          )}\r\n          \r\n          {/* Diyet planı */}\r\n          {showDietPlan && userInfo && (\r\n            <div className=\"diet-plan-container\">\r\n              <DietPlanGenerator userInfo={userInfo} />\r\n            </div>\r\n          )}\r\n          \r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        <div className=\"input-container\">\r\n          <form onSubmit={handleSubmit} className=\"input-form\">\r\n            <div className=\"textarea-container\">\r\n              <textarea\r\n                value={input}\r\n                onChange={(e) => setInput(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                ref={textareaRef}\r\n                placeholder=\"Diyet Dostu'na bir soru sor...\"\r\n                rows=\"1\"\r\n                className=\"chat-input\"\r\n              ></textarea>\r\n              \r\n              <label htmlFor=\"image-upload\" className=\"upload-image-button\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                </svg>\r\n                <input\r\n                  id=\"image-upload\"\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageUpload}\r\n                  className=\"hidden\"\r\n                />\r\n              </label>\r\n            </div>\r\n            \r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading || (!input.trim() && !imageFile)}\r\n              className=\"send-button\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\r\n              </svg>\r\n            </button>\r\n          </form>\r\n          \r\n          {imagePreview && (\r\n            <div className=\"image-preview-container\">\r\n              <img src={imagePreview} alt=\"Yüklenen görsel\" className=\"image-preview\" />\r\n              <button \r\n                onClick={clearImage}\r\n                className=\"remove-image-button\"\r\n                title=\"Görseli kaldır\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Key Modal */}\r\n      {!keySubmitted ? (\r\n        <div className=\"api-key-modal\">\r\n          <div className=\"api-key-container\">\r\n            <h2>Gemini API Anahtarı Gerekli</h2>\r\n            <p>Diyet Dostu AI ile sohbet etmek için Gemini API anahtarınızı girmeniz gerekiyor.</p>\r\n            <form onSubmit={handleSubmitApiKey}>\r\n              <input\r\n                type=\"text\"\r\n                value={apiKey}\r\n                onChange={(e) => setApiKey(e.target.value)}\r\n                className=\"api-key-input\"\r\n                placeholder=\"Gemini API anahtarınız\"\r\n                required\r\n              />\r\n              <div className=\"api-key-actions\">\r\n                <label className=\"remember-checkbox\">\r\n                  <input type=\"checkbox\" defaultChecked />\r\n                  <span>Bu bilgisayarda hatırla</span>\r\n                </label>\r\n                <button type=\"submit\" className=\"api-key-button\">Devam Et</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}