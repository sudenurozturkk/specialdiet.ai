{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\specialdiet.ai\\\\diyet-dostu-web\\\\client\\\\src\\\\components\\\\Chat.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport ChatBubble from './ChatBubble';\nimport UserInfoForm from './UserInfoForm';\nimport DietPlanGenerator from './DietPlanGenerator';\nconst Chat = () => {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [imageFile, setImageFile] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [chatList, setChatList] = useState([]);\n  const [activeChatId, setActiveChatId] = useState(null);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [showUserInfoForm, setShowUserInfoForm] = useState(false);\n  const [showDietPlan, setShowDietPlan] = useState(false);\n  const [userInfo, setUserInfo] = useState(null);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n  const [apiKey, setApiKey] = useState(localStorage.getItem('geminiApiKey') || '');\n  const [keySubmitted, setKeySubmitted] = useState(Boolean(localStorage.getItem('geminiApiKey')));\n  useEffect(() => {\n    fetchChatList();\n    checkUserInfo();\n  }, []);\n  useEffect(() => {\n    if (activeChatId) {\n      fetchChatHistory();\n    }\n  }, [activeChatId]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, showUserInfoForm, showDietPlan]);\n  const checkUserInfo = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadÄ±');\n        return;\n      }\n      const response = await axios.get('/api/user-info', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.userInfo) {\n        setUserInfo(response.data.userInfo);\n      } else {\n        // KullanÄ±cÄ± bilgisi yoksa formu gÃ¶ster\n        // GerÃ§ek uygulamada sohbet baÅŸlattÄ±ktan sonra gÃ¶ster\n        // Åimdilik yorum satÄ±rÄ± olarak bÄ±rakÄ±yoruz\n        // setShowUserInfoForm(true);\n      }\n    } catch (error) {\n      console.error('KullanÄ±cÄ± bilgisi kontrolÃ¼ sÄ±rasÄ±nda hata:', error);\n    }\n  };\n  const fetchChatList = async () => {\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadÄ±');\n        setIsLoading(false);\n        return;\n      }\n      const response = await axios.get('/api/chat-list', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // Sohbet listesini ayarla\n      setChatList(response.data);\n\n      // Ä°lk sohbeti aktif olarak iÅŸaretle (eÄŸer liste boÅŸ deÄŸilse)\n      if (response.data.length > 0 && !activeChatId) {\n        setActiveChatId(response.data[0].id);\n        fetchChatHistory(response.data[0].id);\n      } else if (response.data.length === 0) {\n        // Sohbet listesi boÅŸsa yeni bir sohbet oluÅŸtur\n        createNewChat();\n      }\n    } catch (error) {\n      console.error('Sohbet listesi alÄ±nÄ±rken hata:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const fetchChatHistory = async chatId => {\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadÄ±');\n        setIsLoading(false);\n        return;\n      }\n      const response = await axios.get(`/api/chat-history/${chatId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // BaÅŸarÄ±lÄ± yanÄ±tta mesajlarÄ± gÃ¼ncelle\n      if (response.data.chatHistory && Array.isArray(response.data.chatHistory)) {\n        setMessages(response.data.chatHistory);\n      } else {\n        // BoÅŸ mesaj listesi\n        setMessages([]);\n      }\n    } catch (error) {\n      console.error('Sohbet geÃ§miÅŸi alÄ±nÄ±rken hata:', error);\n      setMessages([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const createNewChat = () => {\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadÄ±');\n        setIsLoading(false);\n        return;\n      }\n\n      // Yeni sohbet oluÅŸtur\n      axios.post('/api/create-chat', {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        if (response.data && response.data.id) {\n          // Yeni sohbeti listeye ekle\n          const newChat = {\n            id: response.data.id,\n            title: response.data.title || 'Yeni Sohbet',\n            lastMessage: new Date().toISOString()\n          };\n          setChatList(prevList => [...prevList, newChat]);\n          setActiveChatId(response.data.id);\n\n          // Yeni sohbetin geÃ§miÅŸini yÃ¼kle (boÅŸ olacak)\n          setMessages([{\n            role: 'assistant',\n            content: `Merhaba! ğŸ˜Š Diyet Dostu'na hoÅŸ geldin!\n\nBen senin kiÅŸisel beslenme ve spor asistanÄ±nÄ±m. Bana istediÄŸin konuda soru sorabilirsin.\n\nTÃ¼rk mutfaÄŸÄ±na uygun, kolay ve saÄŸlÄ±klÄ± tarifler sunarak diyet hedeflerine ulaÅŸmana yardÄ±mcÄ± olacaÄŸÄ±m.\n\nÄ°ÅŸte sana yardÄ±mcÄ± olabileceÄŸim konular:\nğŸ¥— TÃ¼rk mutfaÄŸÄ±na uygun dÃ¼ÅŸÃ¼k kalorili/yÃ¼ksek proteinli tarifler\nğŸ‹ï¸â€â™€ï¸ KiÅŸiselleÅŸtirilmiÅŸ egzersiz planlarÄ±\nğŸ“¸ Yemek fotoÄŸraflarÄ±nÄ± analiz ederek besin deÄŸeri tahmini\nğŸ“ HaftalÄ±k beslenme programÄ± oluÅŸturma\nğŸ“Š Kilo takibi ve geliÅŸim analizi\n\nSormak istediÄŸin bir ÅŸey var mÄ±? Birlikte saÄŸlÄ±klÄ± bir yaÅŸam yolculuÄŸuna baÅŸlayalÄ±m! ğŸ’ª`\n          }]);\n        }\n      }).catch(error => {\n        console.error('Yeni sohbet oluÅŸturulurken hata:', error);\n      }).finally(() => {\n        setIsLoading(false);\n      });\n    } catch (error) {\n      console.error('Yeni sohbet oluÅŸturulurken hata:', error);\n      setIsLoading(false);\n    }\n  };\n  const deleteChat = async chatId => {\n    if (!window.confirm('Bu sohbeti silmek istediÄŸinizden emin misiniz?')) {\n      return;\n    }\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadÄ±');\n        setIsLoading(false);\n        return;\n      }\n\n      // API'ya istek gÃ¶nder\n      const response = await axios.delete(`/api/delete-chat/${chatId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // BaÅŸarÄ±lÄ± yanÄ±tta UI'Ä± gÃ¼ncelle\n      if (response.data.success) {\n        // Sohbet listesinden sil\n        setChatList(prevList => prevList.filter(chat => chat.id !== chatId));\n\n        // EÄŸer aktif sohbet siliniyorsa baÅŸka bir sohbete geÃ§\n        if (chatId === activeChatId) {\n          const remainingChats = chatList.filter(chat => chat.id !== chatId);\n          const nextChat = remainingChats.length > 0 ? remainingChats[0] : null;\n          if (nextChat) {\n            setActiveChatId(nextChat.id);\n            // Bu sohbetin geÃ§miÅŸini yÃ¼kle\n            fetchChatHistory(nextChat.id);\n          } else {\n            // HiÃ§ sohbet kalmadÄ±ysa yeni bir sohbet oluÅŸtur\n            createNewChat();\n          }\n        }\n\n        // Bildirim gÃ¶ster\n        alert('Sohbet baÅŸarÄ±yla silindi.');\n      } else {\n        alert('Sohbet silinirken bir hata oluÅŸtu.');\n      }\n    } catch (error) {\n      console.error('Sohbet silinirken hata:', error);\n      alert('Sohbet silinirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const clearChatHistory = async () => {\n    try {\n      if (!window.confirm('Sohbet geÃ§miÅŸini temizlemek istediÄŸinizden emin misiniz?')) {\n        return;\n      }\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadÄ±');\n        setIsLoading(false);\n        return;\n      }\n\n      // API'ya istek gÃ¶nder\n      const response = await axios.post('/api/clear-chat', {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.success) {\n        // BaÅŸarÄ±lÄ± yanÄ±tta mesajlarÄ± gÃ¼ncelle\n        setMessages(response.data.chatHistory || [{\n          role: 'assistant',\n          content: `Merhaba! ğŸ˜Š Diyet Dostu'na hoÅŸ geldin!\n\nBen senin kiÅŸisel beslenme ve spor asistanÄ±nÄ±m. Sohbet geÃ§miÅŸin temizlendi ve yeni bir konuÅŸma baÅŸlatÄ±ldÄ±.\n\nTÃ¼rk mutfaÄŸÄ±na uygun, kolay ve saÄŸlÄ±klÄ± tarifler sunarak diyet hedeflerine ulaÅŸmana yardÄ±mcÄ± olacaÄŸÄ±m.\n\nÄ°ÅŸte sana yardÄ±mcÄ± olabileceÄŸim konular:\nğŸ¥— TÃ¼rk mutfaÄŸÄ±na uygun dÃ¼ÅŸÃ¼k kalorili/yÃ¼ksek proteinli tarifler\nğŸ‹ï¸â€â™€ï¸ KiÅŸiselleÅŸtirilmiÅŸ egzersiz planlarÄ±\nğŸ“¸ Yemek fotoÄŸraflarÄ±nÄ± analiz ederek besin deÄŸeri tahmini\nğŸ“ HaftalÄ±k beslenme programÄ± oluÅŸturma\nğŸ“Š Kilo takibi ve geliÅŸim analizi\n\nSormak istediÄŸin bir ÅŸey var mÄ±? Birlikte saÄŸlÄ±klÄ± bir yaÅŸam yolculuÄŸuna baÅŸlayalÄ±m! ğŸ’ª`\n        }]);\n\n        // Aktif sohbeti gÃ¼ncelle\n        const updatedList = chatList.map(chat => {\n          if (chat.id === activeChatId) {\n            return {\n              ...chat,\n              title: 'TemizlenmiÅŸ Sohbet'\n            };\n          }\n          return chat;\n        });\n        setChatList(updatedList);\n\n        // FormlarÄ± gizle\n        setShowUserInfoForm(false);\n        setShowDietPlan(false);\n\n        // BaÅŸarÄ± mesajÄ± gÃ¶ster\n        alert('Sohbet geÃ§miÅŸi baÅŸarÄ±yla temizlendi.');\n      } else {\n        // Hata mesajÄ±\n        alert('Sohbet geÃ§miÅŸi temizlenirken bir hata oluÅŸtu.');\n      }\n    } catch (error) {\n      console.error('Sohbet geÃ§miÅŸi temizlenirken hata:', error);\n      // Hata durumunda kullanÄ±cÄ±yÄ± bilgilendir\n      alert('Sohbet geÃ§miÅŸi temizlenirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const scrollToBottom = () => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n  const handleImageUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setImageFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const clearImage = () => {\n    setImageFile(null);\n    setImagePreview(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const message = input.trim();\n    if (!message && !imageFile) return;\n    try {\n      setIsLoading(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadÄ±');\n        setMessages(prev => [...prev, {\n          role: 'assistant',\n          content: 'Oturum sÃ¼reniz dolmuÅŸ gÃ¶rÃ¼nÃ¼yor. LÃ¼tfen tekrar giriÅŸ yapÄ±n.'\n        }]);\n        setIsLoading(false);\n        return;\n      }\n\n      // KullanÄ±cÄ± mesajÄ±nÄ± ekle\n      const userMessage = {\n        role: 'user',\n        content: message\n      };\n      setMessages(prev => [...prev, userMessage]);\n      setInput('');\n\n      // Ã–zel komutlarÄ± kontrol et\n      if (message.toLowerCase().includes('kiÅŸisel bilgilerimi girmek istiyorum') || message.toLowerCase().includes('diyet programÄ± oluÅŸturmak istiyorum') || message.toLowerCase().includes('bilgilerimi gÃ¼ncellemek istiyorum')) {\n        setTimeout(() => {\n          setShowUserInfoForm(true);\n          setIsLoading(false);\n        }, 500);\n        return;\n      }\n      if (message.toLowerCase().includes('diyet planÄ±mÄ± gÃ¶ster') || message.toLowerCase().includes('beslenme planÄ±mÄ± gÃ¶ster') || message.toLowerCase().includes('beslenme planÄ± oluÅŸtur')) {\n        if (!userInfo) {\n          // KullanÄ±cÄ± bilgisi yoksa bilgi formunu gÃ¶ster\n          setTimeout(() => {\n            setMessages(prev => [...prev, {\n              role: 'assistant',\n              content: 'Diyet planÄ± oluÅŸturmak iÃ§in Ã¶ncelikle kiÅŸisel bilgilerinizi girmeniz gerekiyor. Bilgi formunu aÃ§Ä±yorum...'\n            }]);\n            setTimeout(() => {\n              setShowUserInfoForm(true);\n              setIsLoading(false);\n            }, 500);\n          }, 500);\n        } else {\n          // KullanÄ±cÄ± bilgisi varsa diyet planÄ±nÄ± gÃ¶ster\n          setTimeout(() => {\n            setMessages(prev => [...prev, {\n              role: 'assistant',\n              content: 'Ä°ÅŸte size Ã¶zel hazÄ±rladÄ±ÄŸÄ±m beslenme planÄ±:'\n            }]);\n            setTimeout(() => {\n              setShowDietPlan(true);\n              setIsLoading(false);\n            }, 500);\n          }, 500);\n        }\n        return;\n      }\n\n      // EÄŸer gÃ¶rsel varsa, farklÄ± bir endpoint kullanarak gÃ¶rsel analizi yapÄ±n\n      if (imageFile) {\n        const formData = new FormData();\n        formData.append('image', imageFile);\n        try {\n          console.log('GÃ¶rsel analizi isteÄŸi gÃ¶nderiliyor...');\n          const response = await axios.post('/api/analyze-image', formData, {\n            headers: {\n              Authorization: `Bearer ${token}`,\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n          console.log('GÃ¶rsel analiz yanÄ±tÄ±:', response.data);\n\n          // Analiz sonucunu gÃ¶ster (eÄŸer socket.io ile otomatik gelmiyorsa)\n          if (!response.data.message || response.data.message !== 'GÃ¶rÃ¼ntÃ¼ analiz edildi') {\n            // Mesaj yanÄ±tÄ± sadece bildirim iÃ§eriyorsa, birkaÃ§ saniye sonra sohbet geÃ§miÅŸini gÃ¼ncelle\n            setTimeout(() => {\n              fetchChatHistory(activeChatId);\n            }, 1000);\n          }\n\n          // GÃ¶rsel Ã¶nizlemeyi temizle\n          clearImage();\n        } catch (imgError) {\n          console.error('GÃ¶rsel analiz hatasÄ±:', imgError);\n\n          // Hata mesajÄ±nÄ± sohbete ekle\n          setMessages(prev => [...prev, {\n            role: 'assistant',\n            content: 'GÃ¶rsel analiz edilirken bir hata oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin veya baÅŸka bir gÃ¶rsel yÃ¼kleyin.'\n          }]);\n        }\n      } else {\n        // GÃ¶rsel yoksa normal mesaj gÃ¶nderimi yap\n        try {\n          console.log('Mesaj gÃ¶nderiliyor:', message);\n          console.log('Aktif sohbet ID:', activeChatId);\n          const response = await axios.post('/api/chat', {\n            message,\n            chatId: activeChatId\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          console.log('API yanÄ±tÄ±:', response.data);\n\n          // Asistan yanÄ±tÄ±nÄ± ekle (cevap varsa)\n          if (response.data.response) {\n            const assistantMessage = {\n              role: 'assistant',\n              content: response.data.response\n            };\n            setMessages(prev => [...prev, assistantMessage]);\n          } else {\n            // YanÄ±t yoksa, sohbet geÃ§miÅŸini gÃ¼ncellemek iÃ§in bekle\n            setTimeout(() => {\n              fetchChatHistory(activeChatId);\n            }, 1000);\n          }\n        } catch (chatError) {\n          console.error('Mesaj gÃ¶nderme hatasÄ±:', chatError);\n\n          // Hata mesajÄ±nÄ± sohbete ekle ve daha aÃ§Ä±klayÄ±cÄ± hata mesajlarÄ± saÄŸla\n          let errorMessage = 'ÃœzgÃ¼nÃ¼m, mesajÄ±nÄ±z gÃ¶nderilemedi. LÃ¼tfen internet baÄŸlantÄ±nÄ±zÄ± kontrol edin veya daha sonra tekrar deneyin.';\n          if (chatError.response) {\n            // Sunucu yanÄ±tÄ± var, hata kodu ile birlikte\n            console.error('Sunucu yanÄ±t kodu:', chatError.response.status);\n            console.error('Sunucu hata mesajÄ±:', chatError.response.data);\n            if (chatError.response.status === 401 || chatError.response.status === 403) {\n              errorMessage = 'Oturum sÃ¼reniz dolmuÅŸ gÃ¶rÃ¼nÃ¼yor. LÃ¼tfen tekrar giriÅŸ yapÄ±n.';\n            } else if (chatError.response.status === 404) {\n              errorMessage = 'API endpoint bulunamadÄ±. Sunucu yapÄ±landÄ±rmasÄ± kontrol edilmeli.';\n            } else if (chatError.response.status === 500) {\n              errorMessage = 'Sunucu hatasÄ±. LÃ¼tfen daha sonra tekrar deneyin.';\n            }\n          } else if (chatError.request) {\n            // Ä°stek yapÄ±ldÄ± ama yanÄ±t alÄ±namadÄ±\n            console.error('YanÄ±t alÄ±namadÄ±:', chatError.request);\n            errorMessage = 'Sunucuya baÄŸlanÄ±lamÄ±yor. LÃ¼tfen sunucunun Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun.';\n          }\n          setMessages(prev => [...prev, {\n            role: 'assistant',\n            content: errorMessage\n          }]);\n        }\n      }\n    } catch (error) {\n      console.error('Mesaj gÃ¶nderilirken genel hata:', error);\n\n      // Hata mesajÄ±nÄ± sohbete ekleyin\n      const errorMessage = {\n        role: 'assistant',\n        content: 'ÃœzgÃ¼nÃ¼m, bir hata oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin.'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n      setTimeout(scrollToBottom, 100);\n    }\n  };\n  const handleUserInfoSubmit = formData => {\n    // KullanÄ±cÄ± bilgilerini kaydet\n    setUserInfo(formData);\n    setShowUserInfoForm(false);\n\n    // KullanÄ±cÄ± bilgileri alÄ±ndÄ±ÄŸÄ±nda diyet planÄ±nÄ± gÃ¶ster\n    setTimeout(() => {\n      setMessages(prev => [...prev, {\n        role: 'assistant',\n        content: `TeÅŸekkÃ¼rler! Bilgileriniz kaydedildi. \n\nSize Ã¶zel bir beslenme planÄ± hazÄ±rlÄ±yorum. Bu plan, hedeflerinize, tercihlerinize ve ihtiyaÃ§larÄ±nÄ±za gÃ¶re Ã¶zelleÅŸtirilmiÅŸtir.\n\nÄ°ÅŸte size Ã¶zel beslenme planÄ±m:`\n      }]);\n      setTimeout(() => {\n        setShowDietPlan(true);\n      }, 1000);\n    }, 500);\n  };\n  const toggleSidebar = () => {\n    setSidebarOpen(!sidebarOpen);\n  };\n\n  // Eksik olduÄŸu iÃ§in not silme fonksiyonunu ekliyorum\n  const deleteNote = async noteId => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('Token bulunamadÄ±');\n        return;\n      }\n      const response = await axios.delete(`/api/delete-note/${noteId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.success) {\n        // Notu listeden kaldÄ±r\n        setMessages(messages.filter(msg => {\n          // Not ID'si mesaj iÃ§inde tanÄ±mlanmÄ±ÅŸsa (data-note-id gibi bir Ã¶zellik ile)\n          return !(msg.type === 'note' && msg.noteId === noteId);\n        }));\n\n        // Bildirim gÃ¶ster\n        alert('Not baÅŸarÄ±yla silindi');\n      } else {\n        alert('Not silinirken bir hata oluÅŸtu');\n      }\n    } catch (error) {\n      console.error('Not silinirken hata:', error);\n      alert('Not silinirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');\n    }\n  };\n  const handleSubmitApiKey = e => {\n    e.preventDefault();\n    if (apiKey) {\n      localStorage.setItem('geminiApiKey', apiKey);\n      setKeySubmitted(true);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex h-[calc(100vh-64px)]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `chat-sidebar ${sidebarOpen ? 'open' : 'closed'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 border-b flex justify-between items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 604,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"font-semibold text-gray-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 11\n    }\n  }, \"Sohbetlerim\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: createNewChat,\n    className: \"bg-diet-green text-white p-2 rounded-lg hover:bg-green-600 transition-colors\",\n    title: \"Yeni sohbet ba\\u015Flat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-5 w-5\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M12 4v16m8-8H4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overflow-y-auto h-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 9\n    }\n  }, chatList.map(chat => /*#__PURE__*/React.createElement(\"div\", {\n    key: chat.id,\n    className: `p-3 border-b cursor-pointer hover:bg-gray-100 flex justify-between items-center ${chat.id === activeChatId ? 'bg-diet-green bg-opacity-10 border-l-4 border-diet-green' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 619,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1\",\n    onClick: () => setActiveChatId(chat.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-medium text-gray-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 17\n    }\n  }, chat.title), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-xs text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 17\n    }\n  }, chat.date)), chat.id !== 'current' && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => {\n      e.stopPropagation();\n      deleteChat(chat.id);\n    },\n    className: \"text-gray-400 hover:text-red-500 p-1\",\n    title: \"Sohbeti sil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 628,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-5 w-5\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\",\n    clipRule: \"evenodd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 21\n    }\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"sidebar-toggle\",\n    onClick: toggleSidebar,\n    title: sidebarOpen ? \"Kenar Ã§ubuÄŸunu kapat\" : \"Kenar Ã§ubuÄŸunu aÃ§\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 649,\n      columnNumber: 9\n    }\n  }, sidebarOpen ? /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-6 w-6\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 655,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M11 19l-7-7 7-7m8 14l-7-7 7-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-6 w-6\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M13 5l7 7-7 7M5 5l7 7-7 7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 bg-diet-green text-white flex justify-between items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"diyet-dostu-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"avatar-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"#4CAF50\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 669,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\",\n    fill: \"#e8f5e9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 670,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17 8.5C17 6.01 14.99 4 12.5 4C10.01 4 8 6.01 8 8.5C8 11.99 12.5 16.5 12.5 16.5C12.5 16.5 17 11.99 17 8.5ZM12.5 9.5C11.95 9.5 11.5 9.05 11.5 8.5C11.5 7.95 11.95 7.5 12.5 7.5C13.05 7.5 13.5 7.95 13.5 8.5C13.5 9.05 13.05 9.5 12.5 9.5Z\",\n    fill: \"#4CAF50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16 15H9C8.45 15 8 15.45 8 16C8 16.55 8.45 17 9 17H16C16.55 17 17 16.55 17 16C17 15.45 16.55 15 16 15Z\",\n    fill: \"#4CAF50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20ZM12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2Z\",\n    fill: \"#4CAF50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-xl font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 15\n    }\n  }, \"Diyet Dostu \\uD83E\\uDD57\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 15\n    }\n  }, \"Sa\\u011Fl\\u0131kl\\u0131 ya\\u015Fam asistan\\u0131n\\u0131z\"))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: clearChatHistory,\n    className: \"bg-white bg-opacity-20 hover:bg-opacity-30 text-white py-1 px-3 rounded-lg text-sm transition-colors duration-200\",\n    title: \"Sohbet ge\\xE7mi\\u015Fini temizle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 11\n    }\n  }, \"Sohbeti Temizle\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-grow overflow-y-auto p-4 chat-messages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 691,\n      columnNumber: 9\n    }\n  }, messages.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-center h-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 693,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-4xl mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 695,\n      columnNumber: 17\n    }\n  }, \"\\uD83D\\uDC4B\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-xl font-medium text-gray-700 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 696,\n      columnNumber: 17\n    }\n  }, \"Diyet Dostu'na Ho\\u015F Geldin!\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-gray-500 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 17\n    }\n  }, \"Beslenme, diyet veya fitness hakk\\u0131nda bir \\u015Feyler sor.\"))) : messages.map((msg, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 702,\n      columnNumber: 15\n    }\n  }, msg.type === 'note' ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"note-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ChatBubble, {\n    message: msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => deleteNote(msg.noteId),\n    className: \"delete-note-btn\",\n    title: \"Notu sil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 706,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-5 w-5\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\",\n    clipRule: \"evenodd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 712,\n      columnNumber: 25\n    }\n  })))) : /*#__PURE__*/React.createElement(ChatBubble, {\n    message: msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 19\n    }\n  }))), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-2 text-gray-500 p-4 bg-gray-100 rounded-lg max-w-[80%] mr-auto my-3 shadow-md loading-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 724,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 725,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"food-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icon apple\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 727,\n      columnNumber: 19\n    }\n  }, \"\\uD83C\\uDF4E\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icon broccoli\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 728,\n      columnNumber: 19\n    }\n  }, \"\\uD83E\\uDD66\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icon avocado\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 729,\n      columnNumber: 19\n    }\n  }, \"\\uD83E\\uDD51\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"ml-2 font-medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 17\n    }\n  }, \"Diyet Dostu d\\xFC\\u015F\\xFCn\\xFCyor...\"))), showUserInfoForm && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-4 p-2 bg-white rounded-lg shadow-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UserInfoForm, {\n    onSubmit: handleUserInfoSubmit,\n    onCancel: () => setShowUserInfoForm(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 739,\n      columnNumber: 15\n    }\n  })), showDietPlan && userInfo && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-4 p-2 bg-white rounded-lg shadow-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 748,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DietPlanGenerator, {\n    userInfo: userInfo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    ref: messagesEndRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 border-t\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 756,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"flex items-end gap-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 758,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    value: input,\n    onChange: e => setInput(e.target.value),\n    onKeyDown: handleKeyDown,\n    ref: textareaRef,\n    placeholder: \"Diyet Dostu'na bir soru sor...\",\n    className: \"w-full p-3 pr-12 border border-gray-300 rounded-lg resize-none focus:border-diet-green focus:ring-1 focus:ring-diet-green outline-none min-h-[50px] max-h-[200px]\",\n    rows: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 759,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image-upload\",\n    className: \"absolute right-2 bottom-2 cursor-pointer text-gray-500 hover:text-diet-green p-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-6 w-6\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 770,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"image-upload\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleImageUpload,\n    className: \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 773,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: isLoading || !input.trim() && !imageFile,\n    className: `p-3 rounded-lg ${isLoading || !input.trim() && !imageFile ? 'bg-gray-300 cursor-not-allowed' : 'bg-diet-green text-white hover:bg-green-600'} transition-colors`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 783,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-6 w-6\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 788,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M13 5l7 7-7 7M5 5l7 7-7 7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 789,\n      columnNumber: 17\n    }\n  })))), imagePreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-2 relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: imagePreview,\n    alt: \"Y\\xFCklenen g\\xF6rsel\",\n    className: \"h-20 object-contain rounded-md border border-gray-300\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: clearImage,\n    className: \"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors\",\n    title: \"G\\xF6rseli kald\\u0131r\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 797,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-4 w-4\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 802,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M6 18L18 6M6 6l12 12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 803,\n      columnNumber: 19\n    }\n  })))))), !keySubmitted ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 813,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-lg max-w-md w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 814,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-xl font-bold mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 815,\n      columnNumber: 13\n    }\n  }, \"Gemini API Anahtar\\u0131 Gerekli\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 816,\n      columnNumber: 13\n    }\n  }, \"Diyet Dostu AI ile sohbet etmek i\\xE7in Gemini API anahtar\\u0131n\\u0131z\\u0131 girmeniz gerekiyor.\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmitApiKey,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 817,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: apiKey,\n    onChange: e => setApiKey(e.target.value),\n    className: \"form-input mb-4 w-full\",\n    placeholder: \"Gemini API anahtar\\u0131n\\u0131z\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 818,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 826,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 827,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    className: \"mr-2\",\n    defaultChecked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 828,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 829,\n      columnNumber: 19\n    }\n  }, \"Bu bilgisayarda hat\\u0131rla\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 831,\n      columnNumber: 17\n    }\n  }, \"Devam Et\"))))) : null);\n};\nexport default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","ChatBubble","UserInfoForm","DietPlanGenerator","Chat","messages","setMessages","input","setInput","isLoading","setIsLoading","imageFile","setImageFile","imagePreview","setImagePreview","chatList","setChatList","activeChatId","setActiveChatId","sidebarOpen","setSidebarOpen","showUserInfoForm","setShowUserInfoForm","showDietPlan","setShowDietPlan","userInfo","setUserInfo","messagesEndRef","textareaRef","apiKey","setApiKey","localStorage","getItem","keySubmitted","setKeySubmitted","Boolean","fetchChatList","checkUserInfo","fetchChatHistory","scrollToBottom","token","console","error","response","get","headers","Authorization","data","length","id","createNewChat","chatId","chatHistory","Array","isArray","post","then","newChat","title","lastMessage","Date","toISOString","prevList","role","content","catch","finally","deleteChat","window","confirm","delete","success","filter","chat","remainingChats","nextChat","alert","clearChatHistory","updatedList","map","current","scrollIntoView","behavior","handleKeyDown","e","key","shiftKey","preventDefault","handleSubmit","handleImageUpload","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","clearImage","message","trim","prev","userMessage","toLowerCase","includes","setTimeout","formData","FormData","append","log","imgError","assistantMessage","chatError","errorMessage","status","request","handleUserInfoSubmit","toggleSidebar","deleteNote","noteId","msg","type","handleSubmitApiKey","setItem","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","date","stopPropagation","fillRule","clipRule","cx","cy","r","index","onSubmit","onCancel","ref","value","onChange","onKeyDown","placeholder","rows","htmlFor","accept","disabled","src","alt","required","defaultChecked"],"sources":["C:/Users/Administrator/Desktop/specialdiet.ai/diyet-dostu-web/client/src/components/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport ChatBubble from './ChatBubble';\r\nimport UserInfoForm from './UserInfoForm';\r\nimport DietPlanGenerator from './DietPlanGenerator';\r\n\r\nconst Chat = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [chatList, setChatList] = useState([]);\r\n  const [activeChatId, setActiveChatId] = useState(null);\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [showUserInfoForm, setShowUserInfoForm] = useState(false);\r\n  const [showDietPlan, setShowDietPlan] = useState(false);\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n  const textareaRef = useRef(null);\r\n  const [apiKey, setApiKey] = useState(localStorage.getItem('geminiApiKey') || '');\r\n  const [keySubmitted, setKeySubmitted] = useState(Boolean(localStorage.getItem('geminiApiKey')));\r\n\r\n  useEffect(() => {\r\n    fetchChatList();\r\n    checkUserInfo();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (activeChatId) {\r\n      fetchChatHistory();\r\n    }\r\n  }, [activeChatId]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages, showUserInfoForm, showDietPlan]);\r\n\r\n  const checkUserInfo = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadÄ±');\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.get('/api/user-info', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      if (response.data.userInfo) {\r\n        setUserInfo(response.data.userInfo);\r\n      } else {\r\n        // KullanÄ±cÄ± bilgisi yoksa formu gÃ¶ster\r\n        // GerÃ§ek uygulamada sohbet baÅŸlattÄ±ktan sonra gÃ¶ster\r\n        // Åimdilik yorum satÄ±rÄ± olarak bÄ±rakÄ±yoruz\r\n        // setShowUserInfoForm(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('KullanÄ±cÄ± bilgisi kontrolÃ¼ sÄ±rasÄ±nda hata:', error);\r\n    }\r\n  };\r\n\r\n  const fetchChatList = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadÄ±');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.get('/api/chat-list', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      // Sohbet listesini ayarla\r\n      setChatList(response.data);\r\n      \r\n      // Ä°lk sohbeti aktif olarak iÅŸaretle (eÄŸer liste boÅŸ deÄŸilse)\r\n      if (response.data.length > 0 && !activeChatId) {\r\n        setActiveChatId(response.data[0].id);\r\n        fetchChatHistory(response.data[0].id);\r\n      } else if (response.data.length === 0) {\r\n        // Sohbet listesi boÅŸsa yeni bir sohbet oluÅŸtur\r\n        createNewChat();\r\n      }\r\n    } catch (error) {\r\n      console.error('Sohbet listesi alÄ±nÄ±rken hata:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchChatHistory = async (chatId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadÄ±');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.get(`/api/chat-history/${chatId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      // BaÅŸarÄ±lÄ± yanÄ±tta mesajlarÄ± gÃ¼ncelle\r\n      if (response.data.chatHistory && Array.isArray(response.data.chatHistory)) {\r\n        setMessages(response.data.chatHistory);\r\n      } else {\r\n        // BoÅŸ mesaj listesi\r\n        setMessages([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Sohbet geÃ§miÅŸi alÄ±nÄ±rken hata:', error);\r\n      setMessages([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const createNewChat = () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadÄ±');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // Yeni sohbet oluÅŸtur\r\n      axios.post('/api/create-chat', {}, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(response => {\r\n        if (response.data && response.data.id) {\r\n          // Yeni sohbeti listeye ekle\r\n          const newChat = {\r\n            id: response.data.id,\r\n            title: response.data.title || 'Yeni Sohbet',\r\n            lastMessage: new Date().toISOString()\r\n          };\r\n          \r\n          setChatList(prevList => [...prevList, newChat]);\r\n          setActiveChatId(response.data.id);\r\n          \r\n          // Yeni sohbetin geÃ§miÅŸini yÃ¼kle (boÅŸ olacak)\r\n          setMessages([{\r\n            role: 'assistant',\r\n            content: `Merhaba! ğŸ˜Š Diyet Dostu'na hoÅŸ geldin!\r\n\r\nBen senin kiÅŸisel beslenme ve spor asistanÄ±nÄ±m. Bana istediÄŸin konuda soru sorabilirsin.\r\n\r\nTÃ¼rk mutfaÄŸÄ±na uygun, kolay ve saÄŸlÄ±klÄ± tarifler sunarak diyet hedeflerine ulaÅŸmana yardÄ±mcÄ± olacaÄŸÄ±m.\r\n\r\nÄ°ÅŸte sana yardÄ±mcÄ± olabileceÄŸim konular:\r\nğŸ¥— TÃ¼rk mutfaÄŸÄ±na uygun dÃ¼ÅŸÃ¼k kalorili/yÃ¼ksek proteinli tarifler\r\nğŸ‹ï¸â€â™€ï¸ KiÅŸiselleÅŸtirilmiÅŸ egzersiz planlarÄ±\r\nğŸ“¸ Yemek fotoÄŸraflarÄ±nÄ± analiz ederek besin deÄŸeri tahmini\r\nğŸ“ HaftalÄ±k beslenme programÄ± oluÅŸturma\r\nğŸ“Š Kilo takibi ve geliÅŸim analizi\r\n\r\nSormak istediÄŸin bir ÅŸey var mÄ±? Birlikte saÄŸlÄ±klÄ± bir yaÅŸam yolculuÄŸuna baÅŸlayalÄ±m! ğŸ’ª`\r\n          }]);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Yeni sohbet oluÅŸturulurken hata:', error);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n    } catch (error) {\r\n      console.error('Yeni sohbet oluÅŸturulurken hata:', error);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteChat = async (chatId) => {\r\n    if (!window.confirm('Bu sohbeti silmek istediÄŸinizden emin misiniz?')) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadÄ±');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // API'ya istek gÃ¶nder\r\n      const response = await axios.delete(`/api/delete-chat/${chatId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      // BaÅŸarÄ±lÄ± yanÄ±tta UI'Ä± gÃ¼ncelle\r\n      if (response.data.success) {\r\n        // Sohbet listesinden sil\r\n        setChatList(prevList => prevList.filter(chat => chat.id !== chatId));\r\n        \r\n        // EÄŸer aktif sohbet siliniyorsa baÅŸka bir sohbete geÃ§\r\n        if (chatId === activeChatId) {\r\n          const remainingChats = chatList.filter(chat => chat.id !== chatId);\r\n          const nextChat = remainingChats.length > 0 ? remainingChats[0] : null;\r\n          \r\n          if (nextChat) {\r\n            setActiveChatId(nextChat.id);\r\n            // Bu sohbetin geÃ§miÅŸini yÃ¼kle\r\n            fetchChatHistory(nextChat.id);\r\n          } else {\r\n            // HiÃ§ sohbet kalmadÄ±ysa yeni bir sohbet oluÅŸtur\r\n            createNewChat();\r\n          }\r\n        }\r\n        \r\n        // Bildirim gÃ¶ster\r\n        alert('Sohbet baÅŸarÄ±yla silindi.');\r\n      } else {\r\n        alert('Sohbet silinirken bir hata oluÅŸtu.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Sohbet silinirken hata:', error);\r\n      alert('Sohbet silinirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const clearChatHistory = async () => {\r\n    try {\r\n      if (!window.confirm('Sohbet geÃ§miÅŸini temizlemek istediÄŸinizden emin misiniz?')) {\r\n        return;\r\n      }\r\n      \r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadÄ±');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // API'ya istek gÃ¶nder\r\n      const response = await axios.post('/api/clear-chat', {}, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        // BaÅŸarÄ±lÄ± yanÄ±tta mesajlarÄ± gÃ¼ncelle\r\n        setMessages(response.data.chatHistory || [{\r\n          role: 'assistant',\r\n          content: `Merhaba! ğŸ˜Š Diyet Dostu'na hoÅŸ geldin!\r\n\r\nBen senin kiÅŸisel beslenme ve spor asistanÄ±nÄ±m. Sohbet geÃ§miÅŸin temizlendi ve yeni bir konuÅŸma baÅŸlatÄ±ldÄ±.\r\n\r\nTÃ¼rk mutfaÄŸÄ±na uygun, kolay ve saÄŸlÄ±klÄ± tarifler sunarak diyet hedeflerine ulaÅŸmana yardÄ±mcÄ± olacaÄŸÄ±m.\r\n\r\nÄ°ÅŸte sana yardÄ±mcÄ± olabileceÄŸim konular:\r\nğŸ¥— TÃ¼rk mutfaÄŸÄ±na uygun dÃ¼ÅŸÃ¼k kalorili/yÃ¼ksek proteinli tarifler\r\nğŸ‹ï¸â€â™€ï¸ KiÅŸiselleÅŸtirilmiÅŸ egzersiz planlarÄ±\r\nğŸ“¸ Yemek fotoÄŸraflarÄ±nÄ± analiz ederek besin deÄŸeri tahmini\r\nğŸ“ HaftalÄ±k beslenme programÄ± oluÅŸturma\r\nğŸ“Š Kilo takibi ve geliÅŸim analizi\r\n\r\nSormak istediÄŸin bir ÅŸey var mÄ±? Birlikte saÄŸlÄ±klÄ± bir yaÅŸam yolculuÄŸuna baÅŸlayalÄ±m! ğŸ’ª`\r\n        }]);\r\n        \r\n        // Aktif sohbeti gÃ¼ncelle\r\n        const updatedList = chatList.map(chat => {\r\n          if (chat.id === activeChatId) {\r\n            return { ...chat, title: 'TemizlenmiÅŸ Sohbet' };\r\n          }\r\n          return chat;\r\n        });\r\n        \r\n        setChatList(updatedList);\r\n        \r\n        // FormlarÄ± gizle\r\n        setShowUserInfoForm(false);\r\n        setShowDietPlan(false);\r\n        \r\n        // BaÅŸarÄ± mesajÄ± gÃ¶ster\r\n        alert('Sohbet geÃ§miÅŸi baÅŸarÄ±yla temizlendi.');\r\n      } else {\r\n        // Hata mesajÄ±\r\n        alert('Sohbet geÃ§miÅŸi temizlenirken bir hata oluÅŸtu.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Sohbet geÃ§miÅŸi temizlenirken hata:', error);\r\n      // Hata durumunda kullanÄ±cÄ±yÄ± bilgilendir\r\n      alert('Sohbet geÃ§miÅŸi temizlenirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImageFile(file);\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setImagePreview(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const clearImage = () => {\r\n    setImageFile(null);\r\n    setImagePreview(null);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const message = input.trim();\r\n    \r\n    if (!message && !imageFile) return;\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadÄ±');\r\n        setMessages((prev) => [...prev, {\r\n          role: 'assistant',\r\n          content: 'Oturum sÃ¼reniz dolmuÅŸ gÃ¶rÃ¼nÃ¼yor. LÃ¼tfen tekrar giriÅŸ yapÄ±n.'\r\n        }]);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // KullanÄ±cÄ± mesajÄ±nÄ± ekle\r\n      const userMessage = {\r\n        role: 'user',\r\n        content: message\r\n      };\r\n      \r\n      setMessages((prev) => [...prev, userMessage]);\r\n      setInput('');\r\n      \r\n      // Ã–zel komutlarÄ± kontrol et\r\n      if (message.toLowerCase().includes('kiÅŸisel bilgilerimi girmek istiyorum') ||\r\n          message.toLowerCase().includes('diyet programÄ± oluÅŸturmak istiyorum') ||\r\n          message.toLowerCase().includes('bilgilerimi gÃ¼ncellemek istiyorum')) {\r\n        \r\n        setTimeout(() => {\r\n          setShowUserInfoForm(true);\r\n          setIsLoading(false);\r\n        }, 500);\r\n        \r\n        return;\r\n      }\r\n      \r\n      if (message.toLowerCase().includes('diyet planÄ±mÄ± gÃ¶ster') ||\r\n          message.toLowerCase().includes('beslenme planÄ±mÄ± gÃ¶ster') ||\r\n          message.toLowerCase().includes('beslenme planÄ± oluÅŸtur')) {\r\n        \r\n        if (!userInfo) {\r\n          // KullanÄ±cÄ± bilgisi yoksa bilgi formunu gÃ¶ster\r\n          setTimeout(() => {\r\n            setMessages((prev) => [...prev, {\r\n              role: 'assistant',\r\n              content: 'Diyet planÄ± oluÅŸturmak iÃ§in Ã¶ncelikle kiÅŸisel bilgilerinizi girmeniz gerekiyor. Bilgi formunu aÃ§Ä±yorum...'\r\n            }]);\r\n            \r\n            setTimeout(() => {\r\n              setShowUserInfoForm(true);\r\n              setIsLoading(false);\r\n            }, 500);\r\n          }, 500);\r\n        } else {\r\n          // KullanÄ±cÄ± bilgisi varsa diyet planÄ±nÄ± gÃ¶ster\r\n          setTimeout(() => {\r\n            setMessages((prev) => [...prev, {\r\n              role: 'assistant',\r\n              content: 'Ä°ÅŸte size Ã¶zel hazÄ±rladÄ±ÄŸÄ±m beslenme planÄ±:'\r\n            }]);\r\n            \r\n            setTimeout(() => {\r\n              setShowDietPlan(true);\r\n              setIsLoading(false);\r\n            }, 500);\r\n          }, 500);\r\n        }\r\n        \r\n        return;\r\n      }\r\n      \r\n      // EÄŸer gÃ¶rsel varsa, farklÄ± bir endpoint kullanarak gÃ¶rsel analizi yapÄ±n\r\n      if (imageFile) {\r\n        const formData = new FormData();\r\n        formData.append('image', imageFile);\r\n        \r\n        try {\r\n          console.log('GÃ¶rsel analizi isteÄŸi gÃ¶nderiliyor...');\r\n          const response = await axios.post(\r\n            '/api/analyze-image',\r\n            formData,\r\n            {\r\n              headers: { \r\n                Authorization: `Bearer ${token}`,\r\n                'Content-Type': 'multipart/form-data' \r\n              }\r\n            }\r\n          );\r\n          \r\n          console.log('GÃ¶rsel analiz yanÄ±tÄ±:', response.data);\r\n          \r\n          // Analiz sonucunu gÃ¶ster (eÄŸer socket.io ile otomatik gelmiyorsa)\r\n          if (!response.data.message || response.data.message !== 'GÃ¶rÃ¼ntÃ¼ analiz edildi') {\r\n            // Mesaj yanÄ±tÄ± sadece bildirim iÃ§eriyorsa, birkaÃ§ saniye sonra sohbet geÃ§miÅŸini gÃ¼ncelle\r\n            setTimeout(() => {\r\n              fetchChatHistory(activeChatId);\r\n            }, 1000);\r\n          }\r\n          \r\n          // GÃ¶rsel Ã¶nizlemeyi temizle\r\n          clearImage();\r\n        } catch (imgError) {\r\n          console.error('GÃ¶rsel analiz hatasÄ±:', imgError);\r\n          \r\n          // Hata mesajÄ±nÄ± sohbete ekle\r\n          setMessages((prev) => [...prev, {\r\n            role: 'assistant',\r\n            content: 'GÃ¶rsel analiz edilirken bir hata oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin veya baÅŸka bir gÃ¶rsel yÃ¼kleyin.'\r\n          }]);\r\n        }\r\n      } else {\r\n        // GÃ¶rsel yoksa normal mesaj gÃ¶nderimi yap\r\n        try {\r\n          console.log('Mesaj gÃ¶nderiliyor:', message);\r\n          console.log('Aktif sohbet ID:', activeChatId);\r\n          \r\n          const response = await axios.post(\r\n            '/api/chat',\r\n            {\r\n              message,\r\n              chatId: activeChatId\r\n            },\r\n            {\r\n              headers: { Authorization: `Bearer ${token}` }\r\n            }\r\n          );\r\n          \r\n          console.log('API yanÄ±tÄ±:', response.data);\r\n          \r\n          // Asistan yanÄ±tÄ±nÄ± ekle (cevap varsa)\r\n          if (response.data.response) {\r\n            const assistantMessage = {\r\n              role: 'assistant',\r\n              content: response.data.response\r\n            };\r\n            \r\n            setMessages((prev) => [...prev, assistantMessage]);\r\n          } else {\r\n            // YanÄ±t yoksa, sohbet geÃ§miÅŸini gÃ¼ncellemek iÃ§in bekle\r\n            setTimeout(() => {\r\n              fetchChatHistory(activeChatId);\r\n            }, 1000);\r\n          }\r\n        } catch (chatError) {\r\n          console.error('Mesaj gÃ¶nderme hatasÄ±:', chatError);\r\n          \r\n          // Hata mesajÄ±nÄ± sohbete ekle ve daha aÃ§Ä±klayÄ±cÄ± hata mesajlarÄ± saÄŸla\r\n          let errorMessage = 'ÃœzgÃ¼nÃ¼m, mesajÄ±nÄ±z gÃ¶nderilemedi. LÃ¼tfen internet baÄŸlantÄ±nÄ±zÄ± kontrol edin veya daha sonra tekrar deneyin.';\r\n          \r\n          if (chatError.response) {\r\n            // Sunucu yanÄ±tÄ± var, hata kodu ile birlikte\r\n            console.error('Sunucu yanÄ±t kodu:', chatError.response.status);\r\n            console.error('Sunucu hata mesajÄ±:', chatError.response.data);\r\n            \r\n            if (chatError.response.status === 401 || chatError.response.status === 403) {\r\n              errorMessage = 'Oturum sÃ¼reniz dolmuÅŸ gÃ¶rÃ¼nÃ¼yor. LÃ¼tfen tekrar giriÅŸ yapÄ±n.';\r\n            } else if (chatError.response.status === 404) {\r\n              errorMessage = 'API endpoint bulunamadÄ±. Sunucu yapÄ±landÄ±rmasÄ± kontrol edilmeli.';\r\n            } else if (chatError.response.status === 500) {\r\n              errorMessage = 'Sunucu hatasÄ±. LÃ¼tfen daha sonra tekrar deneyin.';\r\n            }\r\n          } else if (chatError.request) {\r\n            // Ä°stek yapÄ±ldÄ± ama yanÄ±t alÄ±namadÄ±\r\n            console.error('YanÄ±t alÄ±namadÄ±:', chatError.request);\r\n            errorMessage = 'Sunucuya baÄŸlanÄ±lamÄ±yor. LÃ¼tfen sunucunun Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun.';\r\n          }\r\n          \r\n          setMessages((prev) => [...prev, {\r\n            role: 'assistant',\r\n            content: errorMessage\r\n          }]);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Mesaj gÃ¶nderilirken genel hata:', error);\r\n      \r\n      // Hata mesajÄ±nÄ± sohbete ekleyin\r\n      const errorMessage = {\r\n        role: 'assistant',\r\n        content: 'ÃœzgÃ¼nÃ¼m, bir hata oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin.'\r\n      };\r\n      \r\n      setMessages((prev) => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n      setTimeout(scrollToBottom, 100);\r\n    }\r\n  };\r\n\r\n  const handleUserInfoSubmit = (formData) => {\r\n    // KullanÄ±cÄ± bilgilerini kaydet\r\n    setUserInfo(formData);\r\n    setShowUserInfoForm(false);\r\n    \r\n    // KullanÄ±cÄ± bilgileri alÄ±ndÄ±ÄŸÄ±nda diyet planÄ±nÄ± gÃ¶ster\r\n    setTimeout(() => {\r\n      setMessages((prev) => [...prev, {\r\n        role: 'assistant',\r\n        content: `TeÅŸekkÃ¼rler! Bilgileriniz kaydedildi. \r\n\r\nSize Ã¶zel bir beslenme planÄ± hazÄ±rlÄ±yorum. Bu plan, hedeflerinize, tercihlerinize ve ihtiyaÃ§larÄ±nÄ±za gÃ¶re Ã¶zelleÅŸtirilmiÅŸtir.\r\n\r\nÄ°ÅŸte size Ã¶zel beslenme planÄ±m:`\r\n      }]);\r\n      \r\n      setTimeout(() => {\r\n        setShowDietPlan(true);\r\n      }, 1000);\r\n    }, 500);\r\n  };\r\n\r\n  const toggleSidebar = () => {\r\n    setSidebarOpen(!sidebarOpen);\r\n  };\r\n\r\n  // Eksik olduÄŸu iÃ§in not silme fonksiyonunu ekliyorum\r\n  const deleteNote = async (noteId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('Token bulunamadÄ±');\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.delete(`/api/delete-note/${noteId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        // Notu listeden kaldÄ±r\r\n        setMessages(messages.filter(msg => {\r\n          // Not ID'si mesaj iÃ§inde tanÄ±mlanmÄ±ÅŸsa (data-note-id gibi bir Ã¶zellik ile)\r\n          return !(msg.type === 'note' && msg.noteId === noteId);\r\n        }));\r\n        \r\n        // Bildirim gÃ¶ster\r\n        alert('Not baÅŸarÄ±yla silindi');\r\n      } else {\r\n        alert('Not silinirken bir hata oluÅŸtu');\r\n      }\r\n    } catch (error) {\r\n      console.error('Not silinirken hata:', error);\r\n      alert('Not silinirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');\r\n    }\r\n  };\r\n\r\n  const handleSubmitApiKey = (e) => {\r\n    e.preventDefault();\r\n    if (apiKey) {\r\n      localStorage.setItem('geminiApiKey', apiKey);\r\n      setKeySubmitted(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-[calc(100vh-64px)]\">\r\n      {/* Sol Kenar Ã‡ubuÄŸu - Sohbet Listesi */}\r\n      <div className={`chat-sidebar ${sidebarOpen ? 'open' : 'closed'}`}>\r\n        <div className=\"p-4 border-b flex justify-between items-center\">\r\n          <h3 className=\"font-semibold text-gray-700\">Sohbetlerim</h3>\r\n          <button \r\n            onClick={createNewChat}\r\n            className=\"bg-diet-green text-white p-2 rounded-lg hover:bg-green-600 transition-colors\"\r\n            title=\"Yeni sohbet baÅŸlat\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"overflow-y-auto h-full\">\r\n          {chatList.map((chat) => (\r\n            <div \r\n              key={chat.id}\r\n              className={`p-3 border-b cursor-pointer hover:bg-gray-100 flex justify-between items-center ${chat.id === activeChatId ? 'bg-diet-green bg-opacity-10 border-l-4 border-diet-green' : ''}`}\r\n            >\r\n              <div className=\"flex-1\" onClick={() => setActiveChatId(chat.id)}>\r\n                <p className=\"font-medium text-gray-800\">{chat.title}</p>\r\n                <p className=\"text-xs text-gray-500\">{chat.date}</p>\r\n              </div>\r\n              {chat.id !== 'current' && (\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    deleteChat(chat.id);\r\n                  }}\r\n                  className=\"text-gray-400 hover:text-red-500 p-1\"\r\n                  title=\"Sohbeti sil\"\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Ana Sohbet AlanÄ± */}\r\n      <div className=\"chat-main\">\r\n        {/* Mobil gÃ¶rÃ¼nÃ¼mde kenar Ã§ubuÄŸu aÃ§ma/kapama butonu */}\r\n        <button \r\n          className=\"sidebar-toggle\"\r\n          onClick={toggleSidebar}\r\n          title={sidebarOpen ? \"Kenar Ã§ubuÄŸunu kapat\" : \"Kenar Ã§ubuÄŸunu aÃ§\"}\r\n        >\r\n          {sidebarOpen ? (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 19l-7-7 7-7m8 14l-7-7 7-7\" />\r\n            </svg>\r\n          ) : (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\r\n            </svg>\r\n          )}\r\n        </button>\r\n        \r\n        <div className=\"p-4 bg-diet-green text-white flex justify-between items-center\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"diyet-dostu-avatar\">\r\n              <div className=\"avatar-icon\">\r\n                <svg viewBox=\"0 0 24 24\" fill=\"#4CAF50\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#e8f5e9\" />\r\n                  <path d=\"M17 8.5C17 6.01 14.99 4 12.5 4C10.01 4 8 6.01 8 8.5C8 11.99 12.5 16.5 12.5 16.5C12.5 16.5 17 11.99 17 8.5ZM12.5 9.5C11.95 9.5 11.5 9.05 11.5 8.5C11.5 7.95 11.95 7.5 12.5 7.5C13.05 7.5 13.5 7.95 13.5 8.5C13.5 9.05 13.05 9.5 12.5 9.5Z\" fill=\"#4CAF50\" />\r\n                  <path d=\"M16 15H9C8.45 15 8 15.45 8 16C8 16.55 8.45 17 9 17H16C16.55 17 17 16.55 17 16C17 15.45 16.55 15 16 15Z\" fill=\"#4CAF50\" />\r\n                  <path d=\"M12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20ZM12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2Z\" fill=\"#4CAF50\" />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold\">Diyet Dostu ğŸ¥—</h2>\r\n              <p className=\"text-sm\">SaÄŸlÄ±klÄ± yaÅŸam asistanÄ±nÄ±z</p>\r\n            </div>\r\n          </div>\r\n          <button \r\n            onClick={clearChatHistory}\r\n            className=\"bg-white bg-opacity-20 hover:bg-opacity-30 text-white py-1 px-3 rounded-lg text-sm transition-colors duration-200\"\r\n            title=\"Sohbet geÃ§miÅŸini temizle\"\r\n          >\r\n            Sohbeti Temizle\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"flex-grow overflow-y-auto p-4 chat-messages\">\r\n          {messages.length === 0 ? (\r\n            <div className=\"flex items-center justify-center h-full\">\r\n              <div className=\"text-center\">\r\n                <div className=\"text-4xl mb-4\">ğŸ‘‹</div>\r\n                <p className=\"text-xl font-medium text-gray-700 mb-2\">Diyet Dostu'na HoÅŸ Geldin!</p>\r\n                <p className=\"text-gray-500 mb-4\">Beslenme, diyet veya fitness hakkÄ±nda bir ÅŸeyler sor.</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            messages.map((msg, index) => (\r\n              <div key={index}>\r\n                {msg.type === 'note' ? (\r\n                  <div className=\"note-container\">\r\n                    <ChatBubble message={msg} />\r\n                    <button \r\n                      onClick={() => deleteNote(msg.noteId)}\r\n                      className=\"delete-note-btn\"\r\n                      title=\"Notu sil\"\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                        <path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <ChatBubble message={msg} />\r\n                )}\r\n              </div>\r\n            ))\r\n          )}\r\n          \r\n          {isLoading && (\r\n            <div className=\"flex items-center space-x-2 text-gray-500 p-4 bg-gray-100 rounded-lg max-w-[80%] mr-auto my-3 shadow-md loading-container\">\r\n              <div className=\"loader-container\">\r\n                <div className=\"food-icons\">\r\n                  <span className=\"icon apple\">ğŸ</span>\r\n                  <span className=\"icon broccoli\">ğŸ¥¦</span>\r\n                  <span className=\"icon avocado\">ğŸ¥‘</span>\r\n                </div>\r\n                <p className=\"ml-2 font-medium\">Diyet Dostu dÃ¼ÅŸÃ¼nÃ¼yor...</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* KullanÄ±cÄ± bilgi formu */}\r\n          {showUserInfoForm && (\r\n            <div className=\"my-4 p-2 bg-white rounded-lg shadow-lg\">\r\n              <UserInfoForm \r\n                onSubmit={handleUserInfoSubmit} \r\n                onCancel={() => setShowUserInfoForm(false)}\r\n              />\r\n            </div>\r\n          )}\r\n          \r\n          {/* Diyet planÄ± */}\r\n          {showDietPlan && userInfo && (\r\n            <div className=\"my-4 p-2 bg-white rounded-lg shadow-lg\">\r\n              <DietPlanGenerator userInfo={userInfo} />\r\n            </div>\r\n          )}\r\n          \r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        <div className=\"p-4 border-t\">\r\n          <form onSubmit={handleSubmit} className=\"flex items-end gap-2\">\r\n            <div className=\"flex-1 relative\">\r\n              <textarea\r\n                value={input}\r\n                onChange={(e) => setInput(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                ref={textareaRef}\r\n                placeholder=\"Diyet Dostu'na bir soru sor...\"\r\n                className=\"w-full p-3 pr-12 border border-gray-300 rounded-lg resize-none focus:border-diet-green focus:ring-1 focus:ring-diet-green outline-none min-h-[50px] max-h-[200px]\"\r\n                rows=\"1\"\r\n              ></textarea>\r\n              \r\n              <label htmlFor=\"image-upload\" className=\"absolute right-2 bottom-2 cursor-pointer text-gray-500 hover:text-diet-green p-1\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                </svg>\r\n                <input\r\n                  id=\"image-upload\"\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageUpload}\r\n                  className=\"hidden\"\r\n                />\r\n              </label>\r\n            </div>\r\n            \r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading || (!input.trim() && !imageFile)}\r\n              className={`p-3 rounded-lg ${isLoading || (!input.trim() && !imageFile) ? 'bg-gray-300 cursor-not-allowed' : 'bg-diet-green text-white hover:bg-green-600'} transition-colors`}\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\r\n              </svg>\r\n            </button>\r\n          </form>\r\n          \r\n          {imagePreview && (\r\n            <div className=\"mt-2 relative\">\r\n              <img src={imagePreview} alt=\"YÃ¼klenen gÃ¶rsel\" className=\"h-20 object-contain rounded-md border border-gray-300\" />\r\n              <button \r\n                onClick={clearImage}\r\n                className=\"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors\"\r\n                title=\"GÃ¶rseli kaldÄ±r\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Key Modal */}\r\n      {!keySubmitted ? (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white p-6 rounded-lg shadow-lg max-w-md w-full\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Gemini API AnahtarÄ± Gerekli</h2>\r\n            <p className=\"mb-4\">Diyet Dostu AI ile sohbet etmek iÃ§in Gemini API anahtarÄ±nÄ±zÄ± girmeniz gerekiyor.</p>\r\n            <form onSubmit={handleSubmitApiKey}>\r\n              <input\r\n                type=\"text\"\r\n                value={apiKey}\r\n                onChange={(e) => setApiKey(e.target.value)}\r\n                className=\"form-input mb-4 w-full\"\r\n                placeholder=\"Gemini API anahtarÄ±nÄ±z\"\r\n                required\r\n              />\r\n              <div className=\"flex justify-between\">\r\n                <label className=\"flex items-center\">\r\n                  <input type=\"checkbox\" className=\"mr-2\" defaultChecked />\r\n                  <span className=\"text-sm\">Bu bilgisayarda hatÄ±rla</span>\r\n                </label>\r\n                <button type=\"submit\" className=\"btn\">Devam Et</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat; "],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,iBAAiB,MAAM,qBAAqB;AAEnD,MAAMC,IAAI,GAAGA,CAAA,KAAM;EACjB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACc,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACgB,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACoB,YAAY,EAAEC,eAAe,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACwB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAAC0B,YAAY,EAAEC,eAAe,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAAC4B,QAAQ,EAAEC,WAAW,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM8B,cAAc,GAAG5B,MAAM,CAAC,IAAI,CAAC;EACnC,MAAM6B,WAAW,GAAG7B,MAAM,CAAC,IAAI,CAAC;EAChC,MAAM,CAAC8B,MAAM,EAAEC,SAAS,CAAC,GAAGjC,QAAQ,CAACkC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;EAChF,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGrC,QAAQ,CAACsC,OAAO,CAACJ,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;EAE/FlC,SAAS,CAAC,MAAM;IACdsC,aAAa,CAAC,CAAC;IACfC,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAENvC,SAAS,CAAC,MAAM;IACd,IAAImB,YAAY,EAAE;MAChBqB,gBAAgB,CAAC,CAAC;IACpB;EACF,CAAC,EAAE,CAACrB,YAAY,CAAC,CAAC;EAElBnB,SAAS,CAAC,MAAM;IACdyC,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAAClC,QAAQ,EAAEgB,gBAAgB,EAAEE,YAAY,CAAC,CAAC;EAE9C,MAAMc,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF,MAAMG,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACQ,KAAK,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAC;QACjC;MACF;MAEA,MAAMC,QAAQ,GAAG,MAAM3C,KAAK,CAAC4C,GAAG,CAAC,gBAAgB,EAAE;QACjDC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;MAEF,IAAIG,QAAQ,CAACI,IAAI,CAACtB,QAAQ,EAAE;QAC1BC,WAAW,CAACiB,QAAQ,CAACI,IAAI,CAACtB,QAAQ,CAAC;MACrC,CAAC,MAAM;QACL;QACA;QACA;QACA;MAAA;IAEJ,CAAC,CAAC,OAAOiB,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,4CAA4C,EAAEA,KAAK,CAAC;IACpE;EACF,CAAC;EAED,MAAMN,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF1B,YAAY,CAAC,IAAI,CAAC;MAClB,MAAM8B,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACQ,KAAK,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAC;QACjChC,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;MAEA,MAAMiC,QAAQ,GAAG,MAAM3C,KAAK,CAAC4C,GAAG,CAAC,gBAAgB,EAAE;QACjDC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;;MAEF;MACAxB,WAAW,CAAC2B,QAAQ,CAACI,IAAI,CAAC;;MAE1B;MACA,IAAIJ,QAAQ,CAACI,IAAI,CAACC,MAAM,GAAG,CAAC,IAAI,CAAC/B,YAAY,EAAE;QAC7CC,eAAe,CAACyB,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC,CAACE,EAAE,CAAC;QACpCX,gBAAgB,CAACK,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC,CAACE,EAAE,CAAC;MACvC,CAAC,MAAM,IAAIN,QAAQ,CAACI,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;QACrC;QACAE,aAAa,CAAC,CAAC;MACjB;IACF,CAAC,CAAC,OAAOR,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACxD,CAAC,SAAS;MACRhC,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAM4B,gBAAgB,GAAG,MAAOa,MAAM,IAAK;IACzC,IAAI;MACFzC,YAAY,CAAC,IAAI,CAAC;MAClB,MAAM8B,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACQ,KAAK,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAC;QACjChC,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;MAEA,MAAMiC,QAAQ,GAAG,MAAM3C,KAAK,CAAC4C,GAAG,CAAC,qBAAqBO,MAAM,EAAE,EAAE;QAC9DN,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;;MAEF;MACA,IAAIG,QAAQ,CAACI,IAAI,CAACK,WAAW,IAAIC,KAAK,CAACC,OAAO,CAACX,QAAQ,CAACI,IAAI,CAACK,WAAW,CAAC,EAAE;QACzE9C,WAAW,CAACqC,QAAQ,CAACI,IAAI,CAACK,WAAW,CAAC;MACxC,CAAC,MAAM;QACL;QACA9C,WAAW,CAAC,EAAE,CAAC;MACjB;IACF,CAAC,CAAC,OAAOoC,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtDpC,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC,SAAS;MACRI,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMwC,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI;MACFxC,YAAY,CAAC,IAAI,CAAC;MAClB,MAAM8B,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACQ,KAAK,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAC;QACjChC,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;;MAEA;MACAV,KAAK,CAACuD,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,EAAE;QACjCV,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC,CACDgB,IAAI,CAACb,QAAQ,IAAI;QAChB,IAAIA,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACE,EAAE,EAAE;UACrC;UACA,MAAMQ,OAAO,GAAG;YACdR,EAAE,EAAEN,QAAQ,CAACI,IAAI,CAACE,EAAE;YACpBS,KAAK,EAAEf,QAAQ,CAACI,IAAI,CAACW,KAAK,IAAI,aAAa;YAC3CC,WAAW,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;UACtC,CAAC;UAED7C,WAAW,CAAC8C,QAAQ,IAAI,CAAC,GAAGA,QAAQ,EAAEL,OAAO,CAAC,CAAC;UAC/CvC,eAAe,CAACyB,QAAQ,CAACI,IAAI,CAACE,EAAE,CAAC;;UAEjC;UACA3C,WAAW,CAAC,CAAC;YACXyD,IAAI,EAAE,WAAW;YACjBC,OAAO,EAAE;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;UACU,CAAC,CAAC,CAAC;QACL;MACF,CAAC,CAAC,CACDC,KAAK,CAACvB,KAAK,IAAI;QACdD,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MAC1D,CAAC,CAAC,CACDwB,OAAO,CAAC,MAAM;QACbxD,YAAY,CAAC,KAAK,CAAC;MACrB,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOgC,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxDhC,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMyD,UAAU,GAAG,MAAOhB,MAAM,IAAK;IACnC,IAAI,CAACiB,MAAM,CAACC,OAAO,CAAC,gDAAgD,CAAC,EAAE;MACrE;IACF;IAEA,IAAI;MACF3D,YAAY,CAAC,IAAI,CAAC;MAClB,MAAM8B,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACQ,KAAK,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAC;QACjChC,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;;MAEA;MACA,MAAMiC,QAAQ,GAAG,MAAM3C,KAAK,CAACsE,MAAM,CAAC,oBAAoBnB,MAAM,EAAE,EAAE;QAChEN,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;;MAEF;MACA,IAAIG,QAAQ,CAACI,IAAI,CAACwB,OAAO,EAAE;QACzB;QACAvD,WAAW,CAAC8C,QAAQ,IAAIA,QAAQ,CAACU,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACxB,EAAE,KAAKE,MAAM,CAAC,CAAC;;QAEpE;QACA,IAAIA,MAAM,KAAKlC,YAAY,EAAE;UAC3B,MAAMyD,cAAc,GAAG3D,QAAQ,CAACyD,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACxB,EAAE,KAAKE,MAAM,CAAC;UAClE,MAAMwB,QAAQ,GAAGD,cAAc,CAAC1B,MAAM,GAAG,CAAC,GAAG0B,cAAc,CAAC,CAAC,CAAC,GAAG,IAAI;UAErE,IAAIC,QAAQ,EAAE;YACZzD,eAAe,CAACyD,QAAQ,CAAC1B,EAAE,CAAC;YAC5B;YACAX,gBAAgB,CAACqC,QAAQ,CAAC1B,EAAE,CAAC;UAC/B,CAAC,MAAM;YACL;YACAC,aAAa,CAAC,CAAC;UACjB;QACF;;QAEA;QACA0B,KAAK,CAAC,2BAA2B,CAAC;MACpC,CAAC,MAAM;QACLA,KAAK,CAAC,oCAAoC,CAAC;MAC7C;IACF,CAAC,CAAC,OAAOlC,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CkC,KAAK,CAAC,2DAA2D,CAAC;IACpE,CAAC,SAAS;MACRlE,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMmE,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI;MACF,IAAI,CAACT,MAAM,CAACC,OAAO,CAAC,0DAA0D,CAAC,EAAE;QAC/E;MACF;MAEA3D,YAAY,CAAC,IAAI,CAAC;MAClB,MAAM8B,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACQ,KAAK,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAC;QACjChC,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;;MAEA;MACA,MAAMiC,QAAQ,GAAG,MAAM3C,KAAK,CAACuD,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC,EAAE;QACvDV,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;MAEF,IAAIG,QAAQ,CAACI,IAAI,CAACwB,OAAO,EAAE;QACzB;QACAjE,WAAW,CAACqC,QAAQ,CAACI,IAAI,CAACK,WAAW,IAAI,CAAC;UACxCW,IAAI,EAAE,WAAW;UACjBC,OAAO,EAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QACQ,CAAC,CAAC,CAAC;;QAEH;QACA,MAAMc,WAAW,GAAG/D,QAAQ,CAACgE,GAAG,CAACN,IAAI,IAAI;UACvC,IAAIA,IAAI,CAACxB,EAAE,KAAKhC,YAAY,EAAE;YAC5B,OAAO;cAAE,GAAGwD,IAAI;cAAEf,KAAK,EAAE;YAAqB,CAAC;UACjD;UACA,OAAOe,IAAI;QACb,CAAC,CAAC;QAEFzD,WAAW,CAAC8D,WAAW,CAAC;;QAExB;QACAxD,mBAAmB,CAAC,KAAK,CAAC;QAC1BE,eAAe,CAAC,KAAK,CAAC;;QAEtB;QACAoD,KAAK,CAAC,sCAAsC,CAAC;MAC/C,CAAC,MAAM;QACL;QACAA,KAAK,CAAC,+CAA+C,CAAC;MACxD;IACF,CAAC,CAAC,OAAOlC,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;MAC1D;MACAkC,KAAK,CAAC,sEAAsE,CAAC;IAC/E,CAAC,SAAS;MACRlE,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAM6B,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIZ,cAAc,CAACqD,OAAO,EAAE;MAC1BrD,cAAc,CAACqD,OAAO,CAACC,cAAc,CAAC;QAAEC,QAAQ,EAAE;MAAS,CAAC,CAAC;IAC/D;EACF,CAAC;EAED,MAAMC,aAAa,GAAIC,CAAC,IAAK;IAC3B,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,IAAI,CAACD,CAAC,CAACE,QAAQ,EAAE;MACpCF,CAAC,CAACG,cAAc,CAAC,CAAC;MAClBC,YAAY,CAACJ,CAAC,CAAC;IACjB;EACF,CAAC;EAED,MAAMK,iBAAiB,GAAIL,CAAC,IAAK;IAC/B,MAAMM,IAAI,GAAGN,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAC9B,IAAIF,IAAI,EAAE;MACR9E,YAAY,CAAC8E,IAAI,CAAC;MAClB,MAAMG,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,SAAS,GAAG,MAAM;QACvBjF,eAAe,CAAC+E,MAAM,CAACG,MAAM,CAAC;MAChC,CAAC;MACDH,MAAM,CAACI,aAAa,CAACP,IAAI,CAAC;IAC5B;EACF,CAAC;EAED,MAAMQ,UAAU,GAAGA,CAAA,KAAM;IACvBtF,YAAY,CAAC,IAAI,CAAC;IAClBE,eAAe,CAAC,IAAI,CAAC;EACvB,CAAC;EAED,MAAM0E,YAAY,GAAG,MAAOJ,CAAC,IAAK;IAChCA,CAAC,CAACG,cAAc,CAAC,CAAC;IAClB,MAAMY,OAAO,GAAG5F,KAAK,CAAC6F,IAAI,CAAC,CAAC;IAE5B,IAAI,CAACD,OAAO,IAAI,CAACxF,SAAS,EAAE;IAE5B,IAAI;MACFD,YAAY,CAAC,IAAI,CAAC;MAClB,MAAM8B,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACQ,KAAK,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAC;QACjCpC,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;UAC9BtC,IAAI,EAAE,WAAW;UACjBC,OAAO,EAAE;QACX,CAAC,CAAC,CAAC;QACHtD,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;;MAEA;MACA,MAAM4F,WAAW,GAAG;QAClBvC,IAAI,EAAE,MAAM;QACZC,OAAO,EAAEmC;MACX,CAAC;MAED7F,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEC,WAAW,CAAC,CAAC;MAC7C9F,QAAQ,CAAC,EAAE,CAAC;;MAEZ;MACA,IAAI2F,OAAO,CAACI,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,sCAAsC,CAAC,IACtEL,OAAO,CAACI,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,qCAAqC,CAAC,IACrEL,OAAO,CAACI,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,mCAAmC,CAAC,EAAE;QAEvEC,UAAU,CAAC,MAAM;UACfnF,mBAAmB,CAAC,IAAI,CAAC;UACzBZ,YAAY,CAAC,KAAK,CAAC;QACrB,CAAC,EAAE,GAAG,CAAC;QAEP;MACF;MAEA,IAAIyF,OAAO,CAACI,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,sBAAsB,CAAC,IACtDL,OAAO,CAACI,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,yBAAyB,CAAC,IACzDL,OAAO,CAACI,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,wBAAwB,CAAC,EAAE;QAE5D,IAAI,CAAC/E,QAAQ,EAAE;UACb;UACAgF,UAAU,CAAC,MAAM;YACfnG,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;cAC9BtC,IAAI,EAAE,WAAW;cACjBC,OAAO,EAAE;YACX,CAAC,CAAC,CAAC;YAEHyC,UAAU,CAAC,MAAM;cACfnF,mBAAmB,CAAC,IAAI,CAAC;cACzBZ,YAAY,CAAC,KAAK,CAAC;YACrB,CAAC,EAAE,GAAG,CAAC;UACT,CAAC,EAAE,GAAG,CAAC;QACT,CAAC,MAAM;UACL;UACA+F,UAAU,CAAC,MAAM;YACfnG,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;cAC9BtC,IAAI,EAAE,WAAW;cACjBC,OAAO,EAAE;YACX,CAAC,CAAC,CAAC;YAEHyC,UAAU,CAAC,MAAM;cACfjF,eAAe,CAAC,IAAI,CAAC;cACrBd,YAAY,CAAC,KAAK,CAAC;YACrB,CAAC,EAAE,GAAG,CAAC;UACT,CAAC,EAAE,GAAG,CAAC;QACT;QAEA;MACF;;MAEA;MACA,IAAIC,SAAS,EAAE;QACb,MAAM+F,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;QAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEjG,SAAS,CAAC;QAEnC,IAAI;UACF8B,OAAO,CAACoE,GAAG,CAAC,uCAAuC,CAAC;UACpD,MAAMlE,QAAQ,GAAG,MAAM3C,KAAK,CAACuD,IAAI,CAC/B,oBAAoB,EACpBmD,QAAQ,EACR;YACE7D,OAAO,EAAE;cACPC,aAAa,EAAE,UAAUN,KAAK,EAAE;cAChC,cAAc,EAAE;YAClB;UACF,CACF,CAAC;UAEDC,OAAO,CAACoE,GAAG,CAAC,uBAAuB,EAAElE,QAAQ,CAACI,IAAI,CAAC;;UAEnD;UACA,IAAI,CAACJ,QAAQ,CAACI,IAAI,CAACoD,OAAO,IAAIxD,QAAQ,CAACI,IAAI,CAACoD,OAAO,KAAK,uBAAuB,EAAE;YAC/E;YACAM,UAAU,CAAC,MAAM;cACfnE,gBAAgB,CAACrB,YAAY,CAAC;YAChC,CAAC,EAAE,IAAI,CAAC;UACV;;UAEA;UACAiF,UAAU,CAAC,CAAC;QACd,CAAC,CAAC,OAAOY,QAAQ,EAAE;UACjBrE,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEoE,QAAQ,CAAC;;UAEhD;UACAxG,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;YAC9BtC,IAAI,EAAE,WAAW;YACjBC,OAAO,EAAE;UACX,CAAC,CAAC,CAAC;QACL;MACF,CAAC,MAAM;QACL;QACA,IAAI;UACFvB,OAAO,CAACoE,GAAG,CAAC,qBAAqB,EAAEV,OAAO,CAAC;UAC3C1D,OAAO,CAACoE,GAAG,CAAC,kBAAkB,EAAE5F,YAAY,CAAC;UAE7C,MAAM0B,QAAQ,GAAG,MAAM3C,KAAK,CAACuD,IAAI,CAC/B,WAAW,EACX;YACE4C,OAAO;YACPhD,MAAM,EAAElC;UACV,CAAC,EACD;YACE4B,OAAO,EAAE;cAAEC,aAAa,EAAE,UAAUN,KAAK;YAAG;UAC9C,CACF,CAAC;UAEDC,OAAO,CAACoE,GAAG,CAAC,aAAa,EAAElE,QAAQ,CAACI,IAAI,CAAC;;UAEzC;UACA,IAAIJ,QAAQ,CAACI,IAAI,CAACJ,QAAQ,EAAE;YAC1B,MAAMoE,gBAAgB,GAAG;cACvBhD,IAAI,EAAE,WAAW;cACjBC,OAAO,EAAErB,QAAQ,CAACI,IAAI,CAACJ;YACzB,CAAC;YAEDrC,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEU,gBAAgB,CAAC,CAAC;UACpD,CAAC,MAAM;YACL;YACAN,UAAU,CAAC,MAAM;cACfnE,gBAAgB,CAACrB,YAAY,CAAC;YAChC,CAAC,EAAE,IAAI,CAAC;UACV;QACF,CAAC,CAAC,OAAO+F,SAAS,EAAE;UAClBvE,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEsE,SAAS,CAAC;;UAElD;UACA,IAAIC,YAAY,GAAG,6GAA6G;UAEhI,IAAID,SAAS,CAACrE,QAAQ,EAAE;YACtB;YACAF,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEsE,SAAS,CAACrE,QAAQ,CAACuE,MAAM,CAAC;YAC9DzE,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEsE,SAAS,CAACrE,QAAQ,CAACI,IAAI,CAAC;YAE7D,IAAIiE,SAAS,CAACrE,QAAQ,CAACuE,MAAM,KAAK,GAAG,IAAIF,SAAS,CAACrE,QAAQ,CAACuE,MAAM,KAAK,GAAG,EAAE;cAC1ED,YAAY,GAAG,6DAA6D;YAC9E,CAAC,MAAM,IAAID,SAAS,CAACrE,QAAQ,CAACuE,MAAM,KAAK,GAAG,EAAE;cAC5CD,YAAY,GAAG,kEAAkE;YACnF,CAAC,MAAM,IAAID,SAAS,CAACrE,QAAQ,CAACuE,MAAM,KAAK,GAAG,EAAE;cAC5CD,YAAY,GAAG,kDAAkD;YACnE;UACF,CAAC,MAAM,IAAID,SAAS,CAACG,OAAO,EAAE;YAC5B;YACA1E,OAAO,CAACC,KAAK,CAAC,kBAAkB,EAAEsE,SAAS,CAACG,OAAO,CAAC;YACpDF,YAAY,GAAG,oEAAoE;UACrF;UAEA3G,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;YAC9BtC,IAAI,EAAE,WAAW;YACjBC,OAAO,EAAEiD;UACX,CAAC,CAAC,CAAC;QACL;MACF;IACF,CAAC,CAAC,OAAOvE,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;;MAEvD;MACA,MAAMuE,YAAY,GAAG;QACnBlD,IAAI,EAAE,WAAW;QACjBC,OAAO,EAAE;MACX,CAAC;MAED1D,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEY,YAAY,CAAC,CAAC;IAChD,CAAC,SAAS;MACRvG,YAAY,CAAC,KAAK,CAAC;MACnB+F,UAAU,CAAClE,cAAc,EAAE,GAAG,CAAC;IACjC;EACF,CAAC;EAED,MAAM6E,oBAAoB,GAAIV,QAAQ,IAAK;IACzC;IACAhF,WAAW,CAACgF,QAAQ,CAAC;IACrBpF,mBAAmB,CAAC,KAAK,CAAC;;IAE1B;IACAmF,UAAU,CAAC,MAAM;MACfnG,WAAW,CAAE+F,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;QAC9BtC,IAAI,EAAE,WAAW;QACjBC,OAAO,EAAE;AACjB;AACA;AACA;AACA;MACM,CAAC,CAAC,CAAC;MAEHyC,UAAU,CAAC,MAAM;QACfjF,eAAe,CAAC,IAAI,CAAC;MACvB,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,EAAE,GAAG,CAAC;EACT,CAAC;EAED,MAAM6F,aAAa,GAAGA,CAAA,KAAM;IAC1BjG,cAAc,CAAC,CAACD,WAAW,CAAC;EAC9B,CAAC;;EAED;EACA,MAAMmG,UAAU,GAAG,MAAOC,MAAM,IAAK;IACnC,IAAI;MACF,MAAM/E,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACQ,KAAK,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAC;QACjC;MACF;MAEA,MAAMC,QAAQ,GAAG,MAAM3C,KAAK,CAACsE,MAAM,CAAC,oBAAoBiD,MAAM,EAAE,EAAE;QAChE1E,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;MAEF,IAAIG,QAAQ,CAACI,IAAI,CAACwB,OAAO,EAAE;QACzB;QACAjE,WAAW,CAACD,QAAQ,CAACmE,MAAM,CAACgD,GAAG,IAAI;UACjC;UACA,OAAO,EAAEA,GAAG,CAACC,IAAI,KAAK,MAAM,IAAID,GAAG,CAACD,MAAM,KAAKA,MAAM,CAAC;QACxD,CAAC,CAAC,CAAC;;QAEH;QACA3C,KAAK,CAAC,uBAAuB,CAAC;MAChC,CAAC,MAAM;QACLA,KAAK,CAAC,gCAAgC,CAAC;MACzC;IACF,CAAC,CAAC,OAAOlC,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CkC,KAAK,CAAC,wDAAwD,CAAC;IACjE;EACF,CAAC;EAED,MAAM8C,kBAAkB,GAAItC,CAAC,IAAK;IAChCA,CAAC,CAACG,cAAc,CAAC,CAAC;IAClB,IAAI1D,MAAM,EAAE;MACVE,YAAY,CAAC4F,OAAO,CAAC,cAAc,EAAE9F,MAAM,CAAC;MAC5CK,eAAe,CAAC,IAAI,CAAC;IACvB;EACF,CAAC;EAED,oBACEtC,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,2BAA2B;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAExCvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAE,gBAAgB1G,WAAW,GAAG,MAAM,GAAG,QAAQ,EAAG;IAAA2G,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAChEvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,gDAAgD;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7DvI,KAAA,CAAAgI,aAAA;IAAIC,SAAS,EAAC,6BAA6B;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,aAAe,CAAC,eAC5DvI,KAAA,CAAAgI,aAAA;IACEQ,OAAO,EAAElF,aAAc;IACvB2E,SAAS,EAAC,8EAA8E;IACxFnE,KAAK,EAAC,yBAAoB;IAAAoE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE1BvI,KAAA,CAAAgI,aAAA;IAAKS,KAAK,EAAC,4BAA4B;IAACR,SAAS,EAAC,SAAS;IAACS,IAAI,EAAC,MAAM;IAACC,OAAO,EAAC,WAAW;IAACC,MAAM,EAAC,cAAc;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/GvI,KAAA,CAAAgI,aAAA;IAAMa,aAAa,EAAC,OAAO;IAACC,cAAc,EAAC,OAAO;IAACC,WAAW,EAAE,CAAE;IAACC,CAAC,EAAC,gBAAgB;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACpF,CACC,CACL,CAAC,eAENvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACpCpH,QAAQ,CAACgE,GAAG,CAAEN,IAAI,iBACjB7E,KAAA,CAAAgI,aAAA;IACEvC,GAAG,EAAEZ,IAAI,CAACxB,EAAG;IACb4E,SAAS,EAAE,mFAAmFpD,IAAI,CAACxB,EAAE,KAAKhC,YAAY,GAAG,0DAA0D,GAAG,EAAE,EAAG;IAAA6G,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE3LvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,QAAQ;IAACO,OAAO,EAAEA,CAAA,KAAMlH,eAAe,CAACuD,IAAI,CAACxB,EAAE,CAAE;IAAA6E,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9DvI,KAAA,CAAAgI,aAAA;IAAGC,SAAS,EAAC,2BAA2B;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE1D,IAAI,CAACf,KAAS,CAAC,eACzD9D,KAAA,CAAAgI,aAAA;IAAGC,SAAS,EAAC,uBAAuB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE1D,IAAI,CAACoE,IAAQ,CAChD,CAAC,EACLpE,IAAI,CAACxB,EAAE,KAAK,SAAS,iBACpBrD,KAAA,CAAAgI,aAAA;IACEQ,OAAO,EAAGhD,CAAC,IAAK;MACdA,CAAC,CAAC0D,eAAe,CAAC,CAAC;MACnB3E,UAAU,CAACM,IAAI,CAACxB,EAAE,CAAC;IACrB,CAAE;IACF4E,SAAS,EAAC,sCAAsC;IAChDnE,KAAK,EAAC,aAAa;IAAAoE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEnBvI,KAAA,CAAAgI,aAAA;IAAKS,KAAK,EAAC,4BAA4B;IAACR,SAAS,EAAC,SAAS;IAACU,OAAO,EAAC,WAAW;IAACD,IAAI,EAAC,cAAc;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjGvI,KAAA,CAAAgI,aAAA;IAAMmB,QAAQ,EAAC,SAAS;IAACH,CAAC,EAAC,6MAA6M;IAACI,QAAQ,EAAC,SAAS;IAAAlB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC1P,CACC,CAEP,CACN,CACE,CACF,CAAC,eAGNvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,WAAW;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAExBvI,KAAA,CAAAgI,aAAA;IACEC,SAAS,EAAC,gBAAgB;IAC1BO,OAAO,EAAEf,aAAc;IACvB3D,KAAK,EAAEvC,WAAW,GAAG,sBAAsB,GAAG,mBAAoB;IAAA2G,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEjEhH,WAAW,gBACVvB,KAAA,CAAAgI,aAAA;IAAKS,KAAK,EAAC,4BAA4B;IAACR,SAAS,EAAC,SAAS;IAACS,IAAI,EAAC,MAAM;IAACC,OAAO,EAAC,WAAW;IAACC,MAAM,EAAC,cAAc;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/GvI,KAAA,CAAAgI,aAAA;IAAMa,aAAa,EAAC,OAAO;IAACC,cAAc,EAAC,OAAO;IAACC,WAAW,EAAE,CAAE;IAACC,CAAC,EAAC,+BAA+B;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACnG,CAAC,gBAENvI,KAAA,CAAAgI,aAAA;IAAKS,KAAK,EAAC,4BAA4B;IAACR,SAAS,EAAC,SAAS;IAACS,IAAI,EAAC,MAAM;IAACC,OAAO,EAAC,WAAW;IAACC,MAAM,EAAC,cAAc;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/GvI,KAAA,CAAAgI,aAAA;IAAMa,aAAa,EAAC,OAAO;IAACC,cAAc,EAAC,OAAO;IAACC,WAAW,EAAE,CAAE;IAACC,CAAC,EAAC,2BAA2B;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC/F,CAED,CAAC,eAETvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,gEAAgE;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7EvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,mBAAmB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAChCvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjCvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,aAAa;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC1BvI,KAAA,CAAAgI,aAAA;IAAKW,OAAO,EAAC,WAAW;IAACD,IAAI,EAAC,SAAS;IAACD,KAAK,EAAC,4BAA4B;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACxEvI,KAAA,CAAAgI,aAAA;IAAQqB,EAAE,EAAC,IAAI;IAACC,EAAE,EAAC,IAAI;IAACC,CAAC,EAAC,IAAI;IAACb,IAAI,EAAC,SAAS;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAChDvI,KAAA,CAAAgI,aAAA;IAAMgB,CAAC,EAAC,0OAA0O;IAACN,IAAI,EAAC,SAAS;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eACpQvI,KAAA,CAAAgI,aAAA;IAAMgB,CAAC,EAAC,wGAAwG;IAACN,IAAI,EAAC,SAAS;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAClIvI,KAAA,CAAAgI,aAAA;IAAMgB,CAAC,EAAC,2LAA2L;IAACN,IAAI,EAAC,SAAS;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACjN,CACF,CACF,CAAC,eACNvI,KAAA,CAAAgI,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEvI,KAAA,CAAAgI,aAAA;IAAIC,SAAS,EAAC,uBAAuB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,0BAAkB,CAAC,eACzDvI,KAAA,CAAAgI,aAAA;IAAGC,SAAS,EAAC,SAAS;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,0DAA6B,CACjD,CACF,CAAC,eACNvI,KAAA,CAAAgI,aAAA;IACEQ,OAAO,EAAEvD,gBAAiB;IAC1BgD,SAAS,EAAC,mHAAmH;IAC7HnE,KAAK,EAAC,kCAA0B;IAAAoE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACjC,iBAEO,CACL,CAAC,eAENvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,6CAA6C;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACzD9H,QAAQ,CAAC2C,MAAM,KAAK,CAAC,gBACpBpD,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,yCAAyC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACtDvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,aAAa;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC1BvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,eAAe;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cAAO,CAAC,eACvCvI,KAAA,CAAAgI,aAAA;IAAGC,SAAS,EAAC,wCAAwC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,iCAA6B,CAAC,eACpFvI,KAAA,CAAAgI,aAAA;IAAGC,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,iEAAwD,CACvF,CACF,CAAC,GAEN9H,QAAQ,CAAC0E,GAAG,CAAC,CAACyC,GAAG,EAAE4B,KAAK,kBACtBxJ,KAAA,CAAAgI,aAAA;IAAKvC,GAAG,EAAE+D,KAAM;IAAAtB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACbX,GAAG,CAACC,IAAI,KAAK,MAAM,gBAClB7H,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,gBAAgB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7BvI,KAAA,CAAAgI,aAAA,CAAC3H,UAAU;IAACkG,OAAO,EAAEqB,GAAI;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAC5BvI,KAAA,CAAAgI,aAAA;IACEQ,OAAO,EAAEA,CAAA,KAAMd,UAAU,CAACE,GAAG,CAACD,MAAM,CAAE;IACtCM,SAAS,EAAC,iBAAiB;IAC3BnE,KAAK,EAAC,UAAU;IAAAoE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEhBvI,KAAA,CAAAgI,aAAA;IAAKS,KAAK,EAAC,4BAA4B;IAACR,SAAS,EAAC,SAAS;IAACU,OAAO,EAAC,WAAW;IAACD,IAAI,EAAC,cAAc;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjGvI,KAAA,CAAAgI,aAAA;IAAMmB,QAAQ,EAAC,SAAS;IAACH,CAAC,EAAC,6MAA6M;IAACI,QAAQ,EAAC,SAAS;IAAAlB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC1P,CACC,CACL,CAAC,gBAENvI,KAAA,CAAAgI,aAAA,CAAC3H,UAAU;IAACkG,OAAO,EAAEqB,GAAI;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAE1B,CACN,CACF,EAEA1H,SAAS,iBACRb,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,2HAA2H;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACxIvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,kBAAkB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/BvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,YAAY;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzBvI,KAAA,CAAAgI,aAAA;IAAMC,SAAS,EAAC,YAAY;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cAAQ,CAAC,eACtCvI,KAAA,CAAAgI,aAAA;IAAMC,SAAS,EAAC,eAAe;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cAAQ,CAAC,eACzCvI,KAAA,CAAAgI,aAAA;IAAMC,SAAS,EAAC,cAAc;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cAAQ,CACpC,CAAC,eACNvI,KAAA,CAAAgI,aAAA;IAAGC,SAAS,EAAC,kBAAkB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,wCAA2B,CACxD,CACF,CACN,EAGA9G,gBAAgB,iBACfzB,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,wCAAwC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrDvI,KAAA,CAAAgI,aAAA,CAAC1H,YAAY;IACXmJ,QAAQ,EAAEjC,oBAAqB;IAC/BkC,QAAQ,EAAEA,CAAA,KAAMhI,mBAAmB,CAAC,KAAK,CAAE;IAAAwG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC5C,CACE,CACN,EAGA5G,YAAY,IAAIE,QAAQ,iBACvB7B,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,wCAAwC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrDvI,KAAA,CAAAgI,aAAA,CAACzH,iBAAiB;IAACsB,QAAQ,EAAEA,QAAS;IAAAqG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACrC,CACN,eAEDvI,KAAA,CAAAgI,aAAA;IAAK2B,GAAG,EAAE5H,cAAe;IAAAmG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACxB,CAAC,eAENvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,cAAc;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC3BvI,KAAA,CAAAgI,aAAA;IAAMyB,QAAQ,EAAE7D,YAAa;IAACqC,SAAS,EAAC,sBAAsB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC5DvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9BvI,KAAA,CAAAgI,aAAA;IACE4B,KAAK,EAAEjJ,KAAM;IACbkJ,QAAQ,EAAGrE,CAAC,IAAK5E,QAAQ,CAAC4E,CAAC,CAACO,MAAM,CAAC6D,KAAK,CAAE;IAC1CE,SAAS,EAAEvE,aAAc;IACzBoE,GAAG,EAAE3H,WAAY;IACjB+H,WAAW,EAAC,gCAAgC;IAC5C9B,SAAS,EAAC,mKAAmK;IAC7K+B,IAAI,EAAC,GAAG;IAAA9B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACC,CAAC,eAEZvI,KAAA,CAAAgI,aAAA;IAAOiC,OAAO,EAAC,cAAc;IAAChC,SAAS,EAAC,kFAAkF;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACxHvI,KAAA,CAAAgI,aAAA;IAAKS,KAAK,EAAC,4BAA4B;IAACR,SAAS,EAAC,SAAS;IAACS,IAAI,EAAC,MAAM;IAACC,OAAO,EAAC,WAAW;IAACC,MAAM,EAAC,cAAc;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/GvI,KAAA,CAAAgI,aAAA;IAAMa,aAAa,EAAC,OAAO;IAACC,cAAc,EAAC,OAAO;IAACC,WAAW,EAAE,CAAE;IAACC,CAAC,EAAC,2JAA2J;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC/N,CAAC,eACNvI,KAAA,CAAAgI,aAAA;IACE3E,EAAE,EAAC,cAAc;IACjBwE,IAAI,EAAC,MAAM;IACXqC,MAAM,EAAC,SAAS;IAChBL,QAAQ,EAAEhE,iBAAkB;IAC5BoC,SAAS,EAAC,QAAQ;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACnB,CACI,CACJ,CAAC,eAENvI,KAAA,CAAAgI,aAAA;IACEH,IAAI,EAAC,QAAQ;IACbsC,QAAQ,EAAEtJ,SAAS,IAAK,CAACF,KAAK,CAAC6F,IAAI,CAAC,CAAC,IAAI,CAACzF,SAAW;IACrDkH,SAAS,EAAE,kBAAkBpH,SAAS,IAAK,CAACF,KAAK,CAAC6F,IAAI,CAAC,CAAC,IAAI,CAACzF,SAAU,GAAG,gCAAgC,GAAG,6CAA6C,oBAAqB;IAAAmH,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE/KvI,KAAA,CAAAgI,aAAA;IAAKS,KAAK,EAAC,4BAA4B;IAACR,SAAS,EAAC,SAAS;IAACS,IAAI,EAAC,MAAM;IAACC,OAAO,EAAC,WAAW;IAACC,MAAM,EAAC,cAAc;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/GvI,KAAA,CAAAgI,aAAA;IAAMa,aAAa,EAAC,OAAO;IAACC,cAAc,EAAC,OAAO;IAACC,WAAW,EAAE,CAAE;IAACC,CAAC,EAAC,2BAA2B;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC/F,CACC,CACJ,CAAC,EAENtH,YAAY,iBACXjB,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,eAAe;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC5BvI,KAAA,CAAAgI,aAAA;IAAKoC,GAAG,EAAEnJ,YAAa;IAACoJ,GAAG,EAAC,uBAAiB;IAACpC,SAAS,EAAC,uDAAuD;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAClHvI,KAAA,CAAAgI,aAAA;IACEQ,OAAO,EAAElC,UAAW;IACpB2B,SAAS,EAAC,kGAAkG;IAC5GnE,KAAK,EAAC,wBAAgB;IAAAoE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEtBvI,KAAA,CAAAgI,aAAA;IAAKS,KAAK,EAAC,4BAA4B;IAACR,SAAS,EAAC,SAAS;IAACS,IAAI,EAAC,MAAM;IAACC,OAAO,EAAC,WAAW;IAACC,MAAM,EAAC,cAAc;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/GvI,KAAA,CAAAgI,aAAA;IAAMa,aAAa,EAAC,OAAO;IAACC,cAAc,EAAC,OAAO;IAACC,WAAW,EAAE,CAAE;IAACC,CAAC,EAAC,sBAAsB;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC1F,CACC,CACL,CAEJ,CACF,CAAC,EAGL,CAAClG,YAAY,gBACZrC,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,4EAA4E;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzFvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,mDAAmD;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAChEvI,KAAA,CAAAgI,aAAA;IAAIC,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,kCAA+B,CAAC,eACvEvI,KAAA,CAAAgI,aAAA;IAAGC,SAAS,EAAC,MAAM;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,oGAAmF,CAAC,eACxGvI,KAAA,CAAAgI,aAAA;IAAMyB,QAAQ,EAAE3B,kBAAmB;IAAAI,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjCvI,KAAA,CAAAgI,aAAA;IACEH,IAAI,EAAC,MAAM;IACX+B,KAAK,EAAE3H,MAAO;IACd4H,QAAQ,EAAGrE,CAAC,IAAKtD,SAAS,CAACsD,CAAC,CAACO,MAAM,CAAC6D,KAAK,CAAE;IAC3C3B,SAAS,EAAC,wBAAwB;IAClC8B,WAAW,EAAC,kCAAwB;IACpCO,QAAQ;IAAApC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACT,CAAC,eACFvI,KAAA,CAAAgI,aAAA;IAAKC,SAAS,EAAC,sBAAsB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnCvI,KAAA,CAAAgI,aAAA;IAAOC,SAAS,EAAC,mBAAmB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAClCvI,KAAA,CAAAgI,aAAA;IAAOH,IAAI,EAAC,UAAU;IAACI,SAAS,EAAC,MAAM;IAACsC,cAAc;IAAArC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eACzDvI,KAAA,CAAAgI,aAAA;IAAMC,SAAS,EAAC,SAAS;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,8BAA6B,CAClD,CAAC,eACRvI,KAAA,CAAAgI,aAAA;IAAQH,IAAI,EAAC,QAAQ;IAACI,SAAS,EAAC,KAAK;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,UAAgB,CACnD,CACD,CACH,CACF,CAAC,GACJ,IACD,CAAC;AAEV,CAAC;AAED,eAAe/H,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module"}